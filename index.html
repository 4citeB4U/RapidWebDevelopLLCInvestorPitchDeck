<!DOCTYPE html>
<html lang="en" class="dark"> <!-- Start in dark mode -->
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RapidWebDevelop LLC | Investor Deck & Business Plan</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> <!-- For Icons -->
  <style>
    /* Modern Custom Web Font */
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    
    :root {
      /* Core Colors */
      --bg-color: #0a0a0f;
      --text-color: #fff;
      --primary-color: #e53e3e;
      --primary-hover: #c53030;
      --secondary-color: #4c1d95;
      --accent-color: #a855f7;
      
      /* UI Colors */
      --card-bg-color: rgba(17, 24, 39, 0.7);
      --highlight-color: #e53e3e;
      --nav-bg-color: rgba(10, 10, 20, 0.98);
      --table-header-bg: rgba(200, 50, 50, 0.8);
      --table-border-color: rgba(100, 100, 100, 0.2);
      --table-row-hover-bg: rgba(80, 80, 90, 0.15);
      
      /* Button Colors */
      --button-text-color: #fff;
      --button-bg-color: #e53e3e; 
      --button-hover-bg-color: #c53030;
      
      /* Chart Colors */
      --chart-grid-color: rgba(128, 128, 128, 0.1);
      --chart-label-color: #e0e0e0;
      
      /* Document Colors */
      --appendix-bg-color: #0d1117;
      --appendix-text-color: #c9d1d9;
      
      /* Modern Gradients */
      --gradient-primary: linear-gradient(135deg, #e53e3e 0%, #9f1239 100%);
      --gradient-hero: linear-gradient(135deg, rgba(10,10,15,0.8) 0%, rgba(76,29,149,0.8) 100%);
      --gradient-card: linear-gradient(135deg, rgba(17,24,39,0.7) 0%, rgba(17,24,39,0.9) 100%);
    }

    .light-mode {
      --bg-color: #f3f4f6;
      --text-color: #111827;
      --primary-color: #dc2626;
      --primary-hover: #b91c1c;
      --secondary-color: #4338ca;
      --accent-color: #8b5cf6;
      
      --card-bg-color: rgba(255, 255, 255, 0.9); 
      --highlight-color: #dc2626;
      --nav-bg-color: rgba(245, 245, 252, 0.98);
      --table-header-bg: #fecaca;
      --table-border-color: rgba(0, 0, 0, 0.1);
      --table-row-hover-bg: rgba(0, 0, 0, 0.03);
      
      --appendix-bg-color: #f5f5f7; 
      --appendix-text-color: #2c2f33;
      --chart-grid-color: rgba(0, 0, 0, 0.08);
      --chart-label-color: #333;
      --button-text-color: #fff;
      
      --gradient-primary: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);
      --gradient-hero: linear-gradient(135deg, rgba(243,244,246,0.8) 0%, rgba(224,231,255,0.8) 100%);
      --gradient-card: linear-gradient(135deg, rgba(255,255,255,0.9) 0%, rgba(249,250,251,0.95) 100%);
    }

    /* Global Styles */
    html { 
      scroll-behavior: smooth; 
      font-size: 16px;
      width: 100%;
      height: 100%;
      overflow-x: hidden;
    }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      background-color: var(--bg-color);
      color: var(--text-color);
      line-height: 1.5;
      transition: background-color 0.3s ease, color 0.3s ease;
      margin: 0;
      padding: 0;
      width: 100%;
      overflow-x: hidden;
      box-sizing: border-box;
    }
    
    *, *:before, *:after {
      box-sizing: inherit;
    }
    
    /* Navigation Styles */
    nav { 
      background-color: var(--nav-bg-color); 
      transition: background-color 0.3s ease;
      -webkit-backdrop-filter: blur(10px);
      backdrop-filter: blur(10px);
      box-shadow: 0 2px 15px rgba(0,0,0,0.15);
    }
    
    .nav-link { 
      cursor: pointer; 
      padding: 0.5rem 0.6rem;
      margin: 0.1rem;
      transition: all 0.3s ease; 
      border-radius: 0.25rem;
      font-weight: 500;
      font-size: 0.85rem;
      white-space: nowrap;
    }
    
    .nav-link:hover, .nav-link.active { 
      background-color: var(--primary-color); 
      color: var(--button-text-color); 
    }
    
    @media (min-width: 768px) {
      .nav-link {
        padding: 0.75rem 1rem;
        font-size: 0.9rem;
      }
    }
    
    /* Section & Card Styles */
    .page-section { 
      min-height: 100vh; 
      display: none; 
      animation: fadeIn 0.8s; 
      padding: 6rem 1rem 2rem;
      max-width: 1200px; 
      margin: 0 auto; 
      width: 100%;
      box-sizing: border-box;
    }
    
    .page-section.active { 
      display: block !important; 
    }
    
    .card { 
      background-color: var(--card-bg-color); 
      background-image: var(--gradient-card);
      border-radius: 0.75rem; 
      padding: 1.75rem; 
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08); 
      transition: transform 0.3s, box-shadow 0.3s; 
      border: 1px solid rgba(255,255,255,0.1); 
    }
    
    .light-mode .card {
      border: 1px solid rgba(0,0,0,0.05);
    }
    
    .card:hover { 
      transform: translateY(-5px); 
      box-shadow: 0 15px 30px rgba(0,0,0,0.15); 
    }
    
    /* Color & Text Styles */
    .text-red-500, .text-red-400 { color: var(--primary-color) !important; }
    .bg-red-500 { background-color: var(--primary-color) !important; color: var(--button-text-color) !important; }
    .hover\:bg-red-600:hover { background-color: var(--primary-hover) !important; }
    
    .highlight { 
      color: var(--primary-color); 
      font-weight: 600; 
      position: relative;
    }
    
    .glow-text { 
      color: var(--primary-color) !important; 
      text-shadow: 0 0 10px rgba(229, 62, 62, 0.5);
      font-weight: 700;
    }
    
    /* Animations */
    @keyframes fadeIn { 
      from { opacity: 0; transform: translateY(20px); } 
      to { opacity: 1; transform: translateY(0); } 
    }
    
    /* Theme toggle button */
    #theme-toggle { 
      position: fixed; 
      bottom: 20px; 
      right: 20px; 
      background-color: var(--card-bg-color); 
      color: var(--text-color); 
      border: none;
      padding: 12px; 
      border-radius: 50%; 
      cursor: pointer; 
      z-index: 1000; 
      font-size: 1.25rem; 
      line-height: 1; 
      box-shadow: 0 4px 15px rgba(0,0,0,0.3); 
      transition: all 0.3s ease;
    }
    
    #theme-toggle:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.4);
    }
    
    /* Chart Styles */
    .chart-container { 
      position: relative; 
      height: 350px; 
      width: 100%; 
      margin-bottom: 1.5rem; 
      padding: 1.25rem; 
      border-radius: 0.75rem; 
      background-color: var(--card-bg-color);
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      border: 1px solid rgba(255,255,255,0.05);
    }
    
    .light-mode .chart-container { 
      border: 1px solid rgba(0,0,0,0.05);
    }
    
    .pie-chart-container { 
      position: relative; 
      height: 450px; 
      width: 100%; 
      margin-bottom: 1.5rem; 
      padding: 1.25rem; 
      border-radius: 0.75rem; 
      background-color: var(--card-bg-color);
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      border: 1px solid rgba(255,255,255,0.05);
    }
    
    .light-mode .pie-chart-container { 
      border: 1px solid rgba(0,0,0,0.05);
    }
    
    /* Ensure settings text is visible in both modes */
    #settings-modal {
      color: var(--text-color) !important;
    }
    
    #settings-modal .text-text-color {
      color: var(--text-color) !important;
    }
    
    #settings-modal select {
      color: var(--text-color) !important;
      border-color: var(--accent-color) !important;
      background-color: var(--card-bg-color) !important;
    }
    
    #settings-modal label,
    #settings-modal span,
    #settings-modal p,
    #settings-modal h3,
    #settings-modal div {
      color: var(--text-color) !important;
    }
    
    /* Override any automatic theme text colors for settings modal */
    .light-mode #settings-modal {
      --text-applied-color: #111827;
    }
    
    .dark #settings-modal {
      --text-applied-color: #ffffff;
    }
    
    #settings-modal label, 
    #settings-modal span {
      color: var(--text-applied-color) !important;
    }
    
    #settings-modal select,
    #settings-modal input[type="range"] {
      background-color: transparent !important;
      border: 1px solid var(--accent-color) !important;
      color: var(--text-applied-color) !important;
    }
    
    #settings-modal option {
      background-color: var(--bg-color) !important;
      color: var(--text-color) !important;
    }
    
    /* Fix visibility in light mode */
    .light-mode .text-white {
      color: var(--bg-color) !important;
    }
    
    .light-mode button,
    .light-mode .primary-cta,
    .light-mode .secondary-cta {
      color: var(--button-text-color);
    }
    
    /* Dark text in light backgrounds for light mode */
    .light-mode .nav-link:not(:hover):not(.active),
    .light-mode .text-sm,
    .light-mode p,
    .light-mode h1,
    .light-mode h2,
    .light-mode h3,
    .light-mode h4,
    .light-mode li,
    .light-mode td,
    .light-mode th {
      color: var(--text-color);
    }
    
    /* Table Styles */
    .data-table { 
      width: 100%; 
      border-collapse: separate; 
      border-spacing: 0;
      border-radius: 0.5rem;
      overflow: hidden;
    }
    
    .data-table th { 
      background-color: var(--table-header-bg); 
      padding: 1rem 0.75rem; 
      text-align: left; 
      transition: background-color 0.3s ease; 
      color: var(--text-color);
      font-weight: 600;
    }
    
    .data-table td { 
      padding: 1rem 0.75rem; 
      border-bottom: 1px solid var(--table-border-color); 
      transition: all 0.3s ease; 
    }
    
    .data-table tr:hover { 
      background-color: var(--table-row-hover-bg); 
    }
    
    /* Agent Lee Card Styles */
    .agent-lee-card-placeholder {
      padding: 1.25rem;
      background-color: var(--card-bg-color);
      border: 1px solid var(--accent-color);
      border-radius: 0.75rem;
      text-align: center;
      margin-top: 1rem;
      margin-bottom: 2rem;
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
      max-height: 150px;
      overflow-y: auto;
    }
    
    .agent-lee-card-placeholder .fas { 
      margin-right: 0.5rem; 
    }
    
    /* Agent Lee Mic Button */
    /* Agent Lee Button Styles Removed */
    
    /* Hero Section */
    .intro-hero-wrapper {
      min-height: 100vh;
      position: relative;
      display: grid;
      grid-template-columns: 1fr;
      overflow: hidden;
      background-color: var(--bg-color);
      margin-bottom: 0;
    }
    
    @media (min-width: 1024px) {
      .intro-hero-wrapper {
        grid-template-columns: 1.3fr 0.7fr;
      }
    }
    
    /* Responsive fixes for mobile */
    @media (max-width: 767px) {
      .hero-content {
        padding: 1rem;
        margin-top: 12rem;
        width: 100%;
        box-sizing: border-box;
        max-width: 100%;
      }
      
      .company-name {
        font-size: 2.2rem;
        line-height: 1.1;
      }
      
      .hero-subtitle {
        font-size: 1.1rem;
        line-height: 1.2;
      }
      
      .value-prop-main {
        font-size: 1.1rem;
        line-height: 1.3;
      }
      
      .page-section {
        padding: 12rem 0.5rem 5rem;
        width: 100%;
        box-sizing: border-box;
        overflow: visible;
      }
      
      .card {
        padding: 1rem;
        width: 100%;
        box-sizing: border-box;
        margin-bottom: 1rem;
      }
      
      .hero-image {
        max-width: 100%;
        margin-top: 1rem;
      }
      
      .stat-item {
        padding: 0.25rem;
      }
      
      .nav-link {
        padding: 0.4rem;
        font-size: 0.7rem;
        margin: 0.1rem 0;
      }
      
      .intro-hero-wrapper {
        min-height: auto;
        padding-bottom: 2rem;
        display: block;
        margin-bottom: 5rem;
      }
      
      .flex-wrap {
        flex-wrap: wrap;
      }
      
      .value-prop-details {
        grid-template-columns: 1fr;
      }
      
      .hero-cta {
        flex-direction: column;
      }
      
      .primary-cta, .secondary-cta {
        width: 100%;
        text-align: center;
      }
      
      .hero-stats {
        width: 100%;
      }
      
      .agent-lee-intro {
        background-color: rgba(76, 29, 149, 0.15);
        padding: 0.75rem;
        margin-bottom: 1rem;
        display: flex;
        flex-wrap: wrap;
        max-height: 8rem;
        overflow-y: auto;
        width: 90%;
        margin-left: auto;
        margin-right: auto;
        -webkit-backdrop-filter: blur(3px);
        backdrop-filter: blur(3px);
      }
      
      .agent-avatar {
        width: 2rem;
        height: 2rem;
        min-width: 2rem;
      }
      
      .agent-message {
        width: 100%;
        overflow-y: auto;
        max-height: 5rem;
      }
      
      .agent-controls {
        width: auto;
        display: flex;
        margin-left: auto;
      }
      
      .page-section.active {
        display: block !important;
        width: 100%;
        overflow-x: hidden;
      }
      
      .value-item {
        margin-bottom: 0.5rem;
        font-size: 0.9rem;
      }
      
      body, html {
        width: 100%;
        max-width: 100%;
        overflow-x: hidden;
      }
      
      .hero-title {
        margin-bottom: 1rem;
      }
      
      .hero-visual {
        display: none;
      }
      
      .agent-text {
        font-size: 0.85rem;
        line-height: 1.3;
      }
    }
    
    .hero-background {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      z-index: 1;
      overflow: hidden;
    }
    
    .hero-pattern {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      opacity: 0.15;
      background-image: radial-gradient(var(--accent-color) 1px, transparent 1px);
      background-size: 50px 50px;
    }
    
    .hero-gradient {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: var(--gradient-hero);
      opacity: 0.6;
    }
    
    .hero-content {
      position: relative;
      z-index: 10;
      padding: 2rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
      max-width: 700px;
      margin: 0 auto;
      width: 100%;
    }
    
    @media (min-width: 1024px) {
      .hero-content {
        padding: 3rem;
        margin: 0;
        margin-left: 2rem;
      }
    }
    
    .hero-badge {
      display: inline-flex;
      align-items: center;
      background-color: rgba(168, 85, 247, 0.1);
      border: 1px solid var(--accent-color);
      border-radius: 50px;
      padding: 0.5rem 1rem;
      font-size: 0.875rem;
      font-weight: 500;
      color: var(--accent-color);
      margin-bottom: 1.5rem;
    }
    
    .hero-badge i {
      margin-right: 0.5rem;
      font-size: 0.75rem;
    }
    
    .hero-title {
      margin: 0 0 1.5rem;
      line-height: 1.1;
    }
    
    .company-name {
      display: block;
      font-size: 3.5rem;
      font-weight: 800;
      background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 0.5rem;
    }
    
    .hero-subtitle {
      display: block;
      font-size: 1.5rem;
      font-weight: 500;
      color: var(--text-color);
      opacity: 0.85;
    }
    
    .value-proposition {
      margin-bottom: 2rem;
    }
    
    .value-prop-main {
      font-size: 1.5rem;
      font-weight: 600;
      margin-bottom: 1.25rem;
      line-height: 1.3;
    }
    
    .value-prop-details {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1rem;
    }
    
    @media (min-width: 640px) {
      .value-prop-details {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    
    .value-item {
      display: flex;
      align-items: center;
      font-size: 0.95rem;
      font-weight: 500;
    }
    
    .value-item i {
      font-size: 1rem;
      color: var(--primary-color);
      margin-right: 0.75rem;
    }
    
    .hero-cta {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      margin-bottom: 2rem;
    }
    
    @media (min-width: 640px) {
      .hero-cta {
        flex-direction: row;
      }
    }
    
    .primary-cta {
      display: flex;
      align-items: center;
      justify-content: center;
      background-image: var(--gradient-primary);
      color: white;
      font-weight: 600;
      padding: 1rem 1.5rem;
      border-radius: 0.5rem;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 10px 20px rgba(229, 62, 62, 0.2);
      gap: 0.5rem;
    }
    
    .primary-cta:hover {
      transform: translateY(-3px);
      box-shadow: 0 15px 25px rgba(229, 62, 62, 0.3);
    }
    
    .secondary-cta {
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: transparent;
      color: var(--text-color);
      font-weight: 600;
      padding: 1rem 1.5rem;
      border-radius: 0.5rem;
      border: 1px solid rgba(255, 255, 255, 0.2);
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .light-mode .secondary-cta {
      border: 1px solid rgba(0, 0, 0, 0.2);
    }
    
    .secondary-cta:hover {
      background-color: rgba(255, 255, 255, 0.1);
      transform: translateY(-3px);
    }
    
    .light-mode .secondary-cta:hover {
      background-color: rgba(0, 0, 0, 0.05);
    }
    
    .hero-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin-top: 1.5rem;
      background-color: rgba(76, 29, 149, 0.1);
      border: 1px solid var(--accent-color);
      border-radius: 0.75rem;
      padding: 1rem;
    }
    
    .stat-item {
      text-align: center;
    }
    
    .stat-number {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--primary-color);
    }
    
    .stat-label {
      font-size: 0.75rem;
      opacity: 0.8;
      font-weight: 500;
    }
    
    .hero-visual {
      display: none;
      position: relative;
      z-index: 5;
    }
    
    @media (min-width: 1024px) {
      .hero-visual {
        display: flex;
        align-items: center;
        justify-content: center;
      }
    }
    
    .hero-image {
      width: 100%;
      max-width: 550px;
      height: auto;
      object-fit: contain;
      border-radius: 1rem;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
      transform: perspective(1000px) rotateY(-10deg);
      transition: all 0.5s ease;
    }
    
    .hero-image:hover {
      transform: perspective(1000px) rotateY(-5deg) translateZ(20px);
    }
    
    .hero-image-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: radial-gradient(circle at center, rgba(168, 85, 247, 0.1) 0%, rgba(10, 10, 15, 0.4) 100%);
      pointer-events: none;
    }
    
    /* Removed Agent Lee floating button styles */
    
    .agent-avatar {
      width: 2.5rem;
      height: 2.5rem;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 1rem;
      flex-shrink: 0;
      overflow: hidden;
    }
    
    .agent-avatar-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .agent-button-image {
      border-radius: 50%;
      object-fit: cover;
    }
    
    .agent-message {
      flex: 1;
    }
    
    .agent-name {
      font-weight: 600;
      font-size: 0.875rem;
      margin-bottom: 0.25rem;
    }
    
    .agent-text {
      font-size: 0.875rem;
      opacity: 0.9;
      line-height: 1.4;
    }
  </style>
</head>
<body>
  <!-- Theme toggle moved to settings -->
  <span id="theme-toggle-placeholder"></span>
  
  <!-- Global Settings Modal -->
  <div id="settings-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden">
    <div class="fixed inset-0 bg-black bg-opacity-60" id="settings-backdrop"></div>
    <div class="bg-card-bg-color text-text-color rounded-lg shadow-xl w-full max-w-md z-10 relative overflow-hidden">
      <div class="bg-gradient-primary p-4 text-white">
        <h3 class="text-xl font-semibold flex items-center">
          <i class="fas fa-cog mr-2"></i> Global Settings
        </h3>
      </div>
      <div class="p-6 text-text-color">
        <!-- Theme -->
        <div class="mb-5">
          <label class="block mb-2 font-medium text-text-color">Theme</label>
          <div class="flex items-center justify-between">
            <div class="flex items-center space-x-4">
              <button id="theme-dark" class="px-4 py-2 rounded border border-accent-color text-white bg-gray-800 flex items-center">
                <i class="fas fa-moon mr-2"></i> Dark
              </button>
              <button id="theme-light" class="px-4 py-2 rounded border border-accent-color bg-white text-gray-800 flex items-center">
                <i class="fas fa-sun mr-2"></i> Light
              </button>
            </div>
            <button id="theme-toggle" class="p-3 rounded-full bg-accent-color text-white flex items-center justify-center" title="Toggle light/dark mode">
              🌓
            </button>
          </div>
        </div>
        
        <!-- Language -->
        <div class="mb-5">
          <label for="global-language" class="block mb-2 font-medium text-text-color">Language</label>
          <select id="global-language" class="w-full px-3 py-2 rounded border border-accent-color bg-card-bg-color text-text-color" title="Select language">
            <option value="en">English</option>
            <option value="es">Español</option>
            <option value="fr">Français</option>
            <option value="de">Deutsch</option>
            <option value="zh">中文</option>
            <option value="ja">日本語</option>
            <option value="ko">한국어</option>
            <option value="ru">Русский</option>
            <option value="pt">Português</option>
            <option value="it">Italiano</option>
            <option value="ar">العربية</option>
            <option value="hi">हिन्दी</option>
            <option value="bn">বাংলা</option>
            <option value="tr">Türkçe</option>
            <option value="id">Bahasa Indonesia</option>
            <option value="vi">Tiếng Việt</option>
            <option value="nl">Nederlands</option>
            <option value="pl">Polski</option>
            <option value="th">ไทย</option>
            <option value="sv">Svenska</option>
          </select>
        </div>
        
        <!-- Voice -->
        <div class="mb-5">
          <label class="block mb-2 font-medium text-text-color">Agent Lee Voice</label>
          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <input type="checkbox" id="voice-enabled" class="mr-2" checked>
              <label for="voice-enabled" class="text-text-color">Enable voice</label>
            </div>
            <select id="voice-select" class="w-1/2 px-3 py-1 rounded border border-accent-color bg-card-bg-color text-text-color" title="Select voice">
              <option value="">Loading voices...</option>
            </select>
          </div>
          <div class="mt-3">
            <label for="voice-speed" class="block mb-1 text-text-color">Speed: <span id="voice-speed-value">1.0</span>x</label>
            <input type="range" id="voice-speed" min="0.5" max="2" step="0.1" value="1" class="w-full">
          </div>
        </div>
        
        <!-- Agent Lee Voice Settings -->
        <div class="mb-5">
          <label class="block mb-2 font-medium text-text-color">Agent Lee Voice Settings</label>
          <div class="flex items-center justify-between mb-2">
            <label for="agent-lee-voice-enabled" class="flex items-center">
              <input type="checkbox" id="agent-lee-voice-enabled" class="mr-2" checked>
              <span class="text-text-color">Enable voice commands</span>
            </label>
            <select id="agent-lee-voice-select" class="w-1/2 px-3 py-1 rounded border border-accent-color bg-card-bg-color text-text-color" title="Select Agent Lee voice">
              <option value="">Default voice</option>
            </select>
          </div>
          <div class="flex items-center justify-between">
            <label for="agent-lee-auto-listen" class="flex items-center">
              <input type="checkbox" id="agent-lee-auto-listen" class="mr-2">
              <span class="text-text-color">Auto-activate listening</span>
            </label>
            <button id="agent-lee-test-voice" class="px-3 py-1 rounded bg-accent-color text-white text-sm" title="Test Agent Lee voice">
              Test Voice
            </button>
          </div>
        </div>
        
        <div class="flex justify-end space-x-3 mt-6">
          <button id="cancel-settings" class="px-4 py-2 rounded border border-accent-color hover:bg-opacity-20 transition-all duration-200">
            Cancel
          </button>
          <button id="save-settings" class="px-4 py-2 rounded bg-primary-color hover:bg-primary-hover text-white transition-all duration-200">
            Save Changes
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <nav class="fixed top-0 left-0 right-0 z-50 shadow-lg">
    <div class="w-full px-2 md:px-4">
      <div class="flex flex-col md:flex-row justify-between items-start md:items-center py-2">
        <div class="flex items-center mb-2 md:mb-0 w-full md:w-auto">
          <span class="text-red-500 font-bold text-lg md:text-xl mr-2">RapidWebDevelop</span>
          <span class="text-xs md:text-sm">Own Your Digital Stage</span>
        </div>
        <div class="grid grid-cols-4 gap-1 md:flex md:flex-wrap md:justify-end text-xs md:text-sm w-full md:w-auto">
          <a class="nav-link active" onclick="navigateToPage('intro')">Intro</a>
          <a class="nav-link" onclick="navigateToPage('problem')">Problem</a>
          <a class="nav-link" onclick="navigateToPage('solution')">Solution</a>
          <a class="nav-link" onclick="navigateToPage('product')">Product</a>
          <a class="nav-link" onclick="navigateToPage('market')">Market</a>
          <a class="nav-link" onclick="navigateToPage('model')">Model</a>
          <a class="nav-link" onclick="navigateToPage('traction')">Traction</a>
          <a class="nav-link" onclick="navigateToPage('team')">Team</a>
          <a class="nav-link" onclick="navigateToPage('financials')">Financials</a>
          <a class="nav-link" onclick="navigateToPage('ask')">Ask</a>
          <a class="nav-link" onclick="navigateToPage('downloads')">Downloads</a>
          <a class="nav-link" href="https://4citeb4u.github.io/LEEWAYSTANDARDSdocs/" target="_blank" rel="noopener">LEEWAY Standards</a>
          <button id="open-settings" class="nav-link bg-gray-700 bg-opacity-30 hover:bg-opacity-50">
            <i class="fas fa-cog mr-1"></i>Settings
          </button>
        </div>
      </div>
    </div>
  </nav>

  <!-- Intro Page -->
  <section id="intro" class="page-section active">
    <div class="intro-hero-wrapper">
      <!-- Background Pattern -->
      <div class="hero-background">
        <div class="hero-pattern"></div>
        <div class="hero-gradient"></div>
      </div>
      
      <!-- Main Content -->
      <div class="hero-content">
        <div class="hero-badge">
          <i class="fas fa-crown"></i>
          <span>Artist Freedom Platform</span>
        </div>
        
        <h1 class="hero-title">
          <span class="company-name">RapidWebDevelop</span>
          <span class="hero-subtitle">Own Your Digital Stage</span>
        </h1>
        
        <div class="value-proposition">
          <div class="value-prop-main">
            Break free from platform fees and revenue cuts forever
          </div>
          <div class="value-prop-details">
            <div class="value-item">
              <i class="fas fa-dollar-sign"></i>
              <span>One-time payment • 100% of your revenue</span>
            </div>
            <div class="value-item">
              <i class="fas fa-key"></i>
              <span>Complete ownership • Full control</span>
            </div>
            <div class="value-item">
              <i class="fas fa-rocket"></i>
              <span>LEEWAY™ powered • AI-ready</span>
            </div>
          </div>
        </div>
        
        <div class="hero-cta">
          <button onclick="navigateToPage('problem')" class="primary-cta">
            <span>See the Artist Revolution</span>
            <i class="fas fa-arrow-right"></i>
          </button>
          <button onclick="navigateToPage('solution')" class="secondary-cta">
            View Our Solution
          </button>
        </div>
        
        <!-- Agent Lee Integration removed -->
        
        <!-- Stats Preview -->
        <div class="hero-stats">
          <div class="stat-item">
            <div class="stat-number">250+</div>
            <div class="stat-label">Artists (Year 1)</div>
          </div>
          <div class="stat-item">
            <div class="stat-number">$157K+</div>
            <div class="stat-label">Revenue</div>
          </div>
          <div class="stat-item">
            <div class="stat-number">96%</div>
            <div class="stat-label">Margin</div>
          </div>
        </div>
      </div>
      
      <!-- Visual Element -->
      <div class="hero-visual">
        <img src="g2myngeoi4.jpg" alt="Digital Marketing Platform Illustration" class="hero-image" />
        <div class="hero-image-overlay"></div>
      </div>
    </div>
  </section>

  <!-- Problem Page -->
  <section id="problem" class="page-section">
    <h2 class="text-4xl font-bold text-red-500 mb-8 text-center">The Problem: Creators Trapped by Predatory Platforms</h2>
    <p class="text-lg mb-6 text-center">Agent Lee here. Let's be frank: traditional platforms claim to support creators, but their models often lead to financial drain, loss of control, and creative burnout. <span class="highlight">They profit from creator struggle, a system we are here to dismantle.</span></p>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
      <div class="card">
        <h3 class="text-xl font-semibold mb-4">Their Financial Drain on Creators</h3>
        <ul class="list-disc pl-5 space-y-2">
          <li><span class="highlight">Endless Recurring Fees:</span> Hundreds, even thousands, siphoned yearly for basic features creators desperately need.</li>
          <li><span class="highlight">Exploitative Revenue Cuts:</span> Platforms greedily take 9-15%+ commission on <span class="italic">your</span> direct sales.</li>
          <li><span class="highlight">Insulting Streaming Pennies:</span> A mere $0.003-$0.005 per stream, making sustainable income a distant dream.</li>
          <li><span class="highlight">Deceptive Hidden Costs:</span> A labyrinth of add-on fees, withdrawal charges, and intentionally complex revenue splits designed to confuse and take more.</li>
        </ul>
      </div>

      <div class="card">
        <h3 class="text-xl font-semibold mb-4">Their Control & Ownership Trap</h3>
        <ul class="list-disc pl-5 space-y-2">
          <li><span class="highlight">No True Platform Ownership:</span> Creators are merely tenants, building value on land they'll never own, always at the mercy of platform changes.</li>
          <li><span class="highlight">Manipulative Algorithm Dependence:</span> Your visibility and direct audience reach are dictated by opaque algorithms, not your talent or hard work.</li>
          <li><span class="highlight">Data Exploitation:</span> Critical audience data belongs to them, not you, severing your direct connection to your followers.</li>
          <li><span class="highlight">Restrictive, Suffocating Contracts:</span> Predatory "360 deals" and other lock-ins that can dictate your entire career and take a piece of everything you do.</li>
        </ul>
      </div>
    </div>

    <div class="card mt-8">
      <h3 class="text-xl font-semibold mb-4">Their Fragmentation Headache & Creative Stifling</h3>
      <p class="mb-4">Creators are forced into a chaotic juggling act across multiple platforms, leading to immense stress, brand dilution, and a crushing inability to focus on their content:</p>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
        <div class="bg-gray-800 p-4 rounded">Bandcamp (still taking a cut)</div>
        <div class="bg-gray-800 p-4 rounded">Spotify (pennies per stream)</div>
        <div class="bg-gray-800 p-4 rounded">Squarespace (endless fees)</div>
        <div class="bg-gray-800 p-4 rounded">Patreon (another middleman)</div>
      </div>
      <p class="mt-4 text-sm italic">This exhausting cycle is <span class="highlight">by their design</span>, keeping creators dependent and disempowered. It's a flawed system ripe for a <span class="highlight">positive, charming, and strong</span> alternative.</p>
    </div>
    
    <div class="flex justify-center mt-12">
        <img src="fd6c2bae-5de2-4837-9054-ba6abb8587a8.png" alt="Visual representation of artist pain points caused by platforms" class="max-w-md rounded-lg shadow-xl">
    </div>
  </section>

  <!-- Solution Page -->
  <section id="solution" class="page-section">
    <h2 class="text-4xl font-bold text-red-500 mb-8 text-center">Our Solution: <span class="glow-text">Own Your Digital Stage</span> with LEEWAY™</h2>
    <p class="text-lg mb-6 text-center">Agent Lee again. We offer a revolutionary path to freedom and financial independence. With RapidWebDevelop, creators secure a <span class="highlight">genuinely strong, transparent deal</span>. This fosters a future filled with <span class="highlight">positive, charming possibilities</span> for their promotional acquisitions and career growth. <span class="highlight">This isn't just a service; it's a true partnership for creator success, unlike the one-sided deals they're used to.</span></p>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
      <div>
        <img src="fd6c2bae-5de2-4837-9054-ba6abb8587a8.png" alt="Creator celebrating platform ownership with LEEWAY™" class="rounded-lg shadow-xl mb-6">
      </div>
      <div>
        <div class="card h-full flex flex-col justify-center">
          <h3 class="text-2xl font-semibold mb-6">The Creator-First Revolution</h3>
          <ul class="list-disc pl-5 space-y-4">
            <li class="text-lg"><span class="highlight">Complete & True Ownership:</span> Your custom digital platform, delivered as a single HTML file. You own it. Forever. No more renting digital land from gatekeepers.</li>
            <li class="text-lg"><span class="highlight">Fair One-Time Payment:</span> A transparent, upfront cost. <span class="italic">Zero</span> recurring platform fees. <span class="italic">Zero</span> surprises. <span class="italic">Zero</span> revenue cuts from us.</li>
            <li class="text-lg"><span class="highlight">100% Revenue Retention:</span> You keep <span class="underline">all</span> sales revenue generated on your platform. We take no commission. Ever. Your success is your own.</li>
            <li class="text-lg"><span class="highlight">The LEEWAY™ Standard:</span> Our proprietary, creator-centric framework ensures your platform is high-performance, SEO-maximized, AI-empowered, and utterly secure.</li>
          </ul>
        </div>
      </div>
    </div>
    
    <div class="card">
      <h3 class="text-xl font-semibold mb-4">The LEEWAY™ Standard: Powering Your Independence</h3>
      <p class="mb-4"><b>L</b>ogically <b>E</b>nhanced <b>W</b>eb <b>E</b>ngineering <b>A</b>rchitecture <b>Y</b>ield gives you <span class="highlight">unparalleled freedom and capability</span>, unlike the restrictive walled gardens of other platforms that stifle your digital presence and content reach.</p>
      <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
        <div class="bg-gray-800 p-4 rounded">
          <h4 class="font-semibold mb-2">Your Modularity</h4>
          <p class="text-sm">Clearly structured, easily understandable code in your single file. Update and expand <span class="italic">your way</span>.</p>
        </div>
        <div class="bg-gray-800 p-4 rounded">
          <h4 class="font-semibold mb-2">Your Optimization</h4>
          <p class="text-sm">Lightning-fast loading and a flawless user experience that <span class="italic">you control</span>.</p>
        </div>
        <div class="bg-gray-800 p-4 rounded">
          <h4 class="font-semibold mb-2">Your AI-Readiness</h4>
          <p class="text-sm">Built for tomorrow's AI tools, enhancing <span class="italic">your discovery</span> and <span class="italic">your creative assistance</span>.</p>
        </div>
        <div class="bg-gray-800 p-4 rounded">
          <h4 class="font-semibold mb-2">Your Semantic Power</h4>
          <p class="text-sm">Superior SEO and seamless integration with all platforms, on <span class="italic">your terms</span>.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Product Page -->
  <section id="product" class="page-section">
    <h2 class="text-4xl font-bold text-red-500 mb-8 text-center">The Product: Your Complete, Owned Digital Universe</h2>
    <p class="mb-8 text-lg text-center">Agent Lee at your service. We deliver more than a website; we deliver <span class="highlight">your sovereign digital hub</span>. Tiered packages ($399 - $1299+) offer flexibility, but all provide <span class="highlight">total ownership and freedom</span> from parasitic platform fees. <span class="highlight">This is a powerful promotional acquisition for your artistic brand, ensuring a positive and charming experience for your fans.</span></p>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
      <div class="card">
        <h3 class="text-xl font-semibold mb-4">Your Media, Your Stage</h3>
        <ul class="list-disc pl-5 space-y-2">
          <li>Advanced Music Player (lossless, <span class="italic">your</span> choice)</li>
          <li>HD Video Gallery & Embedding (<span class="italic">your</span> content)</li>
          <li>Art, Photography & Poetry Portfolios (<span class="italic">your</span> vision)</li>
          <li>Customizable Layouts & Themes (<span class="italic">your</span> brand)</li>
          <li>Flawlessly Mobile-Optimized Design</li>
        </ul>
      </div>
      
      <div class="card">
        <h3 class="text-xl font-semibold mb-4">Your Monetization, Your Money</h3>
        <ul class="list-disc pl-5 space-y-2">
          <li>Integrated Merch Store (e.g., Printful/Stripe Connect - <span class="italic">your</span> direct integration)</li>
          <li>Digital Downloads (Music, Art, PDFs - <span class="italic">your</span> files, <span class="italic">your</span> price)</li>
          <li>Direct Music Sales (Albums, Tracks - <span class="italic">your</span> store)</li>
          <li><span class="highlight">You Keep 100% of Sales Revenue. Full Stop.</span></li>
          <li>Ticketing for Events/Streams (<span class="italic">your</span> shows, <span class="italic">your</span> revenue)</li>
        </ul>
      </div>
      
      <div class="card">
        <h3 class="text-xl font-semibold mb-4">Your Fans, Your Tools</h3>
        <ul class="list-disc pl-5 space-y-2">
          <li>Events Calendar & Promotion (<span class="italic">your</span> schedule)</li>
          <li>Live Streaming Integration (<span class="italic">your</span> performances)</li>
          <li>Community Board / Fan Forum (<span class="italic">your</span> direct fan connection)</li>
          <li>Secure Member Login Areas (<span class="italic">your</span> exclusive content)</li>
          <li>Built-in Analytics Hooks (GA4, TikTok etc. - <span class="italic">your</span> data, <span class="italic">your</span> insights)</li>
          <li>Optional Ad Integration (<span class="highlight">You control it, you get the lion's share</span> - unlike their forced ads)</li>
        </ul>
      </div>
    </div>
    
    <div class="card">
      <h3 class="text-xl font-semibold mb-4">Our AI-Assisted, Artist-Focused Delivery</h3>
      <p class="text-center text-sm mb-2">While they automate to extract value and complicate your life, <span class="highlight">we automate to empower you. Our process ensures a strong, efficient promotional acquisition of your new digital home, creating a positive and charming onboarding experience.</span></p>
      <div class="grid grid-cols-1 md:grid-cols-5 gap-4 text-center">
        <div class="bg-gray-800 p-4 rounded">
          <span class="text-red-500 font-bold text-xl">1</span>
          <p class="text-sm">Deep Discovery & Asset Collection</p>
        </div>
        <div class="bg-gray-800 p-4 rounded">
          <span class="text-red-500 font-bold text-xl">2</span>
          <p class="text-sm">AI-Assisted Initial Platform Build</p>
        </div>
        <div class="bg-gray-800 p-4 rounded">
          <span class="text-red-500 font-bold text-xl">3</span>
          <p class="text-sm">Collaborative Refinement & Customization</p>
        </div>
        <div class="bg-gray-800 p-4 rounded">
          <span class="text-red-500 font-bold text-xl">4</span>
          <p class="text-sm">Rigorous QA & Performance Optimization</p>
        </div>
        <div class="bg-gray-800 p-4 rounded">
          <span class="text-red-500 font-bold text-xl">5</span>
          <p class="text-sm">Your Platform Delivery & Empowerment Onboarding</p>
        </div>
      </div>
    </div>
    
    <div class="flex justify-center mt-12">
      <img src="cec6e7ac-02a6-4ec4-b485-b2ca418dbfcc.png" alt="Showcase of diverse artist platforms built with LEEWAY™" class="max-w-full rounded-lg shadow-xl">
    </div>
  </section>

  <!-- Market Page -->
  <section id="market" class="page-section">
    <h2 class="text-4xl font-bold text-red-500 mb-8 text-center">Market Opportunity: Artists Are Demanding a Revolution</h2>
    <p class="text-lg mb-6 text-center">Agent Lee reporting: The tide is turning. Artists are weary of exploitation. They seek <span class="highlight">genuine partners who offer strong deals and a positive vision</span>, not just another platform to rent. <span class="highlight">Our charming, artist-centric approach, focused on effective promotional acquisition, is precisely what the market craves.</span></p>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
      <div class="card">
        <h3 class="text-xl font-semibold mb-4">Our Target: The Empowered Independent Artist</h3>
        <p class="mb-4">We focus on independent artists, musicians, writers, and visual creators actively seeking alternatives to exploitative platforms. Our initial SAM in key Midwest creative hubs (Milwaukee, Chicago, etc.) is ~10,000-15,000 artists, representing a significant immediate market for our <span class="highlight">superior promotional acquisition offer</span>.</p>
        <ul class="list-disc pl-5 space-y-1 text-sm">
          <li>Milwaukee: MARN, House of RAD, Backline, Imagine MKE</li>
          <li>Chicago: 2112, The Silver Room, Elastic Arts, Links Hall</li>
          <li>And many more ripe for a <span class="highlight">positive change and a strong deal</span>...</li>
        </ul>
         <p class="mt-2 text-xs italic">This isn't just a market; it's a movement waiting for a leader. We are that leader.</p>
      </div>
      
      <div class="h-96 flex items-center justify-center chart-container">
          <canvas id="marketChart"></canvas>
      </div>
    </div>
    
    <div class="card">
      <h3 class="text-xl font-semibold mb-4">Our Unbeatable Edge: The Clear Choice for Artists</h3>
      <p class="text-sm mb-2 text-center"><span class="highlight">Their model is to take. Our model is to give you control, your earnings, and a positive path forward. The choice is, charmingly, simple.</span></p>
      <table class="data-table">
        <thead>
          <tr>
            <th>Factor</th>
            <th>Their Exploitative Platforms</th>
            <th>RapidWebDevelop (Your Strong Deal)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Upfront Cost</td>
            <td>"Free" (with endless hidden costs & limitations)</td>
            <td><span class="highlight">Transparent One-Time Fee ($399-$1299+)</span></td>
          </tr>
          <tr>
            <td>Ongoing Cost</td>
            <td>$19-$300+/year + CONSTANT upsells & fees</td>
            <td><span class="highlight">$0 Platform Fees. Ever.</span> (Optional hosting ~$5-10/mo if you choose)</td>
          </tr>
          <tr>
            <td>Sales Commission</td>
            <td>A greedy 9-15%+ cut from <span class="italic">your</span> sales</td>
            <td><span class="highlight">0% - You Keep 100% of YOUR Money</span></td>
          </tr>
          <tr>
            <td>Platform Ownership</td>
            <td>None. You're a digital sharecropper.</td>
            <td><span class="highlight">Complete, Permanent, Unquestionable Ownership</span></td>
          </tr>
           <tr>
            <td>Data Ownership</td>
            <td>They own and exploit your fan data.</td>
            <td><span class="highlight">You Own All Your Data. Period.</span></td>
          </tr>
          <tr>
            <td>Future-Proofing</td>
            <td>Subject to their whims, algorithm changes, and price hikes.</td>
            <td><span class="highlight">AI-Ready, SEO-Optimized, Modular. Built for YOUR Future.</span></td>
          </tr>
          <tr>
            <td>Core Focus</td>
            <td>Their revenue, their data aggregation, their lock-in.</td>
            <td><span class="highlight">YOUR Empowerment, YOUR Financial Freedom, YOUR Success.</span></td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <div class="mt-12">
      <img src="secondbest.png" alt="Chart showing RapidWebDevelop as the superior market choice for artists" class="max-w-full rounded-lg shadow-xl mx-auto">
    </div>
  </section>

  <!-- Business Model Page -->
  <section id="model" class="page-section">
    <h2 class="text-4xl font-bold text-red-500 mb-8 text-center">Our Business Model: Profit Through Artist Prosperity</h2>
    <p class="text-lg mb-6 text-center">Agent Lee states: Unlike competitors who profit from artist dependency, our revenue grows as we successfully empower more artists. Our <span class="highlight">promotional acquisition strategy</span> is built on offering undeniable value and a <span class="highlight">positive outlook for every artist we partner with. This strong deal is our charming advantage.</span></p>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
      <div class="card">
        <h3 class="text-xl font-semibold mb-4">Our Revenue Streams (Artist-Friendly)</h3>
        <ul class="list-disc pl-5 space-y-2">
          <li><span class="highlight">Primary:</span> One-time platform development fee – your investment in true ownership.
            <ul class="list-disc pl-5 text-sm">
                <li>Tier 1 (Essential): $399</li>
                <li>Tier 2 (Pro): $699</li>
                <li>Tier 3 (Ultimate): $1299</li>
                <li>Fair Average Selling Price (ASP): ~$609</li>
            </ul>
          </li>
          <li><span class="highlight">Secondary (Optional):</span> Value-added recurring services (Managed Hosting + Pro Support @ $25/month). <span class="italic">Only if you choose it.</span> Assumed 15% attach rate from satisfied artists.</li>
          <li><span class="highlight">Future (Shared Success):</span> LEEWAY™ Standard licensing, white-label solutions, AI add-ons, and an <span class="underline">artist-controlled, majority-share ad revenue model</span>. We only grow if you grow with us. Their models make them grow by taking from you.</li>
        </ul>
      </div>
      
      <div class="card">
        <h3 class="text-xl font-semibold mb-4">Our Cost Structure (Lean & Artist-Focused)</h3>
        <ul class="list-disc pl-5 space-y-2">
          <li><span class="highlight">Minimal Variable Costs:</span> Primarily payment processing. No bloated platform overhead passed to you. Domain/hosting is yours or via our fair optional package. Their variable costs often include taking more of your money.</li>
          <li><span class="highlight">Strategic Fixed/Scaling Costs:</span> Investment in founder support, cutting-edge software, impactful marketing & sales (to reach more artists like you), and future team growth to maintain excellent service.</li>
          <li><span class="highlight">Unmatched Cost Efficiency:</span> Our LEEWAY™ framework, AI-assistance, and streamlined automation mean superior platforms at a fraction of traditional development costs, allowing for our high artist-value, high-margin model. This efficiency is passed on to you.</li>
        </ul>
      </div>
    </div>
    
    <div class="card mb-12">
      <h3 class="text-xl font-semibold mb-4 text-center">Exceptional Gross Margin (The Foundation of a Strong Deal for All)</h3>
       <p class="text-center text-lg mb-4">Projected <span class="highlight text-2xl">~96% Gross Margin</span> on our core platform sales. This efficiency allows us to offer incredible value to artists while building a sustainable, impactful business – unlike competitors burning cash on features that don't serve artists.</p>
      <div class="w-full md:w-4/5 lg:w-3/5 mx-auto chart-container">
          <canvas id="marginChart"></canvas>
      </div>
    </div>
    
    <div class="card">
      <h3 class="text-xl font-semibold mb-4 text-center">Our Phased Growth: Spreading Artist Empowerment</h3>
      <p class="mb-4 text-sm text-center">Our go-to-market is about <span class="highlight">building genuine partnerships and offering a positive alternative</span>, using smart tech like our AI CRM to connect with hubs that truly support artists. <span class="highlight">Our promotional acquisition is charmingly effective because it's based on real value and a strong deal, not hype.</span></p>
      <div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-center">
        <div class="bg-gray-800 p-4 rounded">
          <span class="text-red-500 font-bold text-sm">PHASE 1</span>
          <p class="font-semibold">Strong Foundation</p>
          <p class="text-xs">Perfecting LEEWAY™, forging key pilot partnerships (MARN, Backline), launching initial empowered artists.</p>
        </div>
        <div class="bg-gray-800 p-4 rounded">
          <span class="text-red-500 font-bold text-sm">PHASE 2</span>
          <p class="font-semibold">Hub Alliance</p>
          <p class="text-xs">Targeted Midwest creative hub outreach. AI CRM for personalized, high-value engagement. <span class="italic">Offering a better deal.</span></p>
        </div>
        <div class="bg-gray-800 p-4 rounded">
          <span class="text-red-500 font-bold text-sm">PHASE 3</span>
          <p class="font-semibold">Scale with Integrity</p>
          <p class="text-xs">Expanding reach via ethical digital marketing & referrals from thriving artists. More automation for efficiency.</p>
        </div>
        <div class="bg-gray-800 p-4 rounded">
          <span class="text-red-500 font-bold text-sm">PHASE 4</span>
          <p class="font-semibold">Broaden Impact</p>
          <p class="text-xs">New regions, white-label for aligned organizations, LEEWAY™ licensing to spread artist control.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Traction Page -->
  <section id="traction" class="page-section">
    <h2 class="text-4xl font-bold text-red-500 mb-8 text-center">Traction & Milestones: Proof of Our Positive Momentum</h2>
    <p class="text-lg mb-6 text-center">Agent Lee confirming: We're not just conceptualizing; we're actively building and forming <span class="highlight">strong, mutually beneficial partnerships</span>. Our <span class="highlight">promotional acquisition</span> efforts are already demonstrating a <span class="highlight">charming and enthusiastic reception</span> from the artist community, validating our <span class="highlight">positive outlook</span>.</p>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
      <div class="card">
        <h3 class="text-xl font-semibold mb-4">Technology & IP (Our Strong Foundation)</h3>
        <ul class="list-disc pl-5 space-y-2 text-sm">
          <li>LEEWAY™ Standard (v1.0) fully developed, documented, and artist-approved.</li>
          <li>Core platform template created, rigorously tested, and ready for rapid deployment – <span class="highlight">unlike platforms perpetually in beta.</span></li>
          <li>AI-assisted development workflow prototyped and actively streamlining our efficient process.</li>
          <li>Comprehensive QA & deployment process established for flawless, reliable delivery.</li>
          <li>Single-file ad management system (artist-controlled & majority share) proof-of-concept complete.</li>
          <li>Robust Social/Search integration module (JSON-LD, OpenGraph) implemented and functional.</li>
        </ul>
      </div>
      
      <div class="card">
        <h3 class="text-xl font-semibold mb-4">Market Validation & Key Partnerships</h3>
        <ul class="list-disc pl-5 space-y-2 text-sm">
          <li>Advanced discussions and workshop planning with <span class="highlight">MARN</span> (Milwaukee Artist Resource Network) – <span class="highlight">they see the value.</span></li>
          <li>Workshop proposal enthusiastically received by <span class="highlight">House of RAD</span> – <span class="highlight">artists are eager.</span></li>
          <li>Pilot program discussions initiated with <span class="highlight">Backline</span> MKE music incubator – <span class="highlight">industry recognizes our potential.</span></li>
          <li>Creator hub mapping for Midwest (50+ potential partners) complete & prioritized in AI CRM.</li>
          <li><span class="highlight">Overwhelmingly positive feedback</span> from initial artist demos on the LEEWAY™ platform's power and simplicity.</li>
        </ul>
      </div>
      
      <div class="card">
        <h3 class="text-xl font-semibold mb-4">Marketing & Sales Assets (Ready to Engage)</h3>
        <ul class="list-disc pl-5 space-y-2 text-sm">
          <li>Compelling ROI calculator clearly demonstrating massive artist savings & earnings potential versus their costly alternatives.</li>
          <li>Hard-hitting "Us vs. Them" competitive comparison materials that unequivocally highlight <span class="highlight">our superior, strong deal</span>.</li>
          <li>Artist empowerment workshop curriculum drafted and ready for deployment – <span class="highlight">sharing our positive vision.</span></li>
          <li>AI CRM (HubSpot) configured for efficient partnership tracking and personalized, charming outreach.</li>
          <li>Initial marketing content calendar planned with a <span class="highlight">positive, engaging, and charming</span> voice that resonates.</li>
        </ul>
      </div>
    </div>
    
    <div class="card">
      <h3 class="text-xl font-semibold mb-4 text-center">Upcoming Key Milestones (Our Roadmap to Greater Impact for Artists)</h3>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="bg-gray-800 p-4 rounded">
          <h4 class="font-semibold mb-2">Next 3 Months (Q2 2025)</h4>
          <ul class="list-disc pl-5 text-xs">
            <li>Launch first 5-10 LEEWAY™ pilot artist sites, showcasing undeniable success.</li>
            <li>Secure 2 formal hub partnerships (e.g., MARN, Backline) for wider reach and credibility.</li>
            <li>Hold inaugural "Own Your Digital Stage" workshop, directly empowering local artists with our <span class="highlight">positive message</span>.</li>
            <li>Full AI CRM v1.0 deployment for streamlined operations and outreach.</li>
          </ul>
        </div>
        <div class="bg-gray-800 p-4 rounded">
          <h4 class="font-semibold mb-2">Next 6 Months (Q3 2025)</h4>
          <ul class="list-disc pl-5 text-xs">
            <li>Achieve 25+ delighted paying artist customers, proving our model's appeal.</li>
            <li>Roll out our <span class="highlight">charming and effective approach</span> to Chicago & Madison hubs (5+ new partnerships).</li>
            <li>Publish 3 impactful artist case studies demonstrating the LEEWAY™ advantage and the <span class="highlight">strength of our deal</span>.</li>
            <li>Begin development of LEEWAY™ v1.1 (enhanced automation & artist tools based on early feedback).</li>
          </ul>
        </div>
         <div class="bg-gray-800 p-4 rounded">
          <h4 class="font-semibold mb-2">Next 12 Months (Q1 2026)</h4>
          <ul class="list-disc pl-5 text-xs">
            <li>Empower 100+ artists with their own LEEWAY™ platforms, building a wave of advocates.</li>
            <li>Expand our <span class="highlight">strong deal</span> offering to 2 new Midwest states, proving scalability.</li>
            <li>Secure first white-label/licensing interest from like-minded organizations seeking to replicate our <span class="highlight">positive impact</span>.</li>
            <li>Reach sustainable, cash-flow positive operations, demonstrating the viability of an artist-first model.</li>
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- Team Page -->
  <section id="team" class="page-section">
    <h2 class="text-4xl font-bold text-red-500 mb-8 text-center">The Team: Driven by Mission, Guided by Artists</h2>
    <p class="text-lg mb-6 text-center">Agent Lee speaking for the team: Our leadership, spearheaded by Leonard Lee of Milwaukee, combines deep technical expertise with an unwavering passion for artist advocacy. We're building a company that embodies a <span class="highlight">positive, charming outlook</span> because we genuinely believe in the artists we serve and the <span class="highlight">strength of the deal</span> we offer.</p>
    <div class="card mb-12">
      <h3 class="text-xl font-semibold mb-4 text-center">Core Leadership</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 items-center">
        <div class="flex flex-col items-center text-center">
          <img src="g2myngeoi4.jpg" alt="Core Leader of RapidWebDevelop" class="w-40 h-40 bg-gray-700 rounded-full mb-4 object-cover shadow-lg">
          <h4 class="font-bold text-xl">Core Leader</h4>
          <p class="text-red-400">Strategic Visionary / Operations Lead</p>
          <p class="text-sm mt-2 px-4">A dynamic leader bringing real-world experience and strategic vision to RapidWebDevelop. With expertise in scaling operations and a deep understanding of market dynamics, this core leader champions our mission to empower artists with strong, fair deals. <span class="highlight">Committed to building sustainable value for both artists and investors through innovative technology and positive partnerships.</span></p>
        </div>
        <div class="flex flex-col items-center text-center">
          <img src="9tcj6ycenj.png" alt="Agent Lee - AI Technology Lead" class="w-40 h-40 rounded-full mb-4 object-cover shadow-lg bg-gradient-to-br from-blue-400 to-purple-600 p-1">
          <h4 class="font-bold text-xl">Agent Lee</h4>
          <p class="text-red-400">AI Technology Lead / User Experience Architect</p>
          <p class="text-sm mt-2 px-4">The AI-powered core of our LEEWAY™ technology stack, Agent Lee represents our commitment to intelligent, user-centric design. As our Technology Lead, Agent Lee ensures seamless integration between human creativity and AI efficiency. <span class="highlight">Agent Lee embodies our vision of technology that serves artists, not the other way around.</span></p>
        </div>
      </div>
    </div>
    
    <div class="card">
      <h3 class="text-xl font-semibold mb-4 text-center">Our Operational Philosophy: Efficiency for Empowerment</h3>
      <p class="mb-4 text-center">We're lean, agile, and technology-amplified. Our efficiency doesn't cut corners on artist value; it <span class="highlight">enhances it, allowing us to offer a deal far superior to theirs.</span></p>
      <ul class="list-disc pl-5 space-y-2 max-w-2xl mx-auto">
        <li><span class="highlight">Technology-First, Artist-Benefit:</span> AI-assisted development, robust automation, and the LEEWAY™ standard drive efficiency, making <span class="highlight">our strong deal possible</span>.</li>
        <li><span class="highlight">Artist-Centric by Design:</span> Every decision is guided by what best serves the artist's independence, financial success, and <span class="highlight">positive career outlook</span>. Their decisions often prioritize platform profits.</li>
        <li><span class="highlight">Community & Genuine Partnership Driven:</span> Growth through authentic relationships with creative hubs and artist communities, facilitated by our AI CRM. <span class="highlight">No empty promises, just charmingly effective support.</span></li>
        <li><span class="highlight">Scalable by Empowering, Not Exploiting:</span> Our processes and technology are built for non-linear growth in our client base without proportional cost increases, ensuring sustainability for us and continued value for artists. <span class="highlight">We scale by lifting artists up; they scale by locking them in.</span></li>
      </ul>
    </div>
  </section>

  <!-- Financials Page -->
  <section id="financials" class="page-section">
    <h2 class="text-4xl font-bold text-red-500 mb-8 text-center">Financials: Profitable Empowerment, Clear Artist ROI</h2>
    <p class="text-center mb-6 text-lg">Agent Lee confirms: Our projections are built on realistic customer acquisition (Y1: 250, Y2: 900, Y3: 1920), a fair ASP of $609, and a modest 15% attach rate for truly optional $25/mo services. This model ensures <span class="highlight">our success is inextricably tied to artist success, a stark contrast to their models of exploitation. Our strong deal directly translates to a strong, sustainable business with a positive financial outlook.</span></p>
    
    <div class="card mb-12">
        <h3 class="text-2xl font-semibold mb-4 text-center text-red-400">Year 1 Focus: Launching the Revolution, Strong Initial Returns</h3>
        <p class="text-center text-sm mb-4">Our <span class="highlight">promotional acquisition</span> strategy is designed for immediate impact. With a <span class="highlight">positive outlook</span> and a <span class="highlight">charming, irresistible offer</span> that artists recognize as a <span class="highlight">genuinely strong deal</span>, Year 1 will unequivocally establish our model's superior strength and artist appeal.</p>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
            <div>
                <p class="text-4xl font-bold highlight">250+</p>
                <p class="text-sm">Artists Empowered (Target)</p>
            </div>
            <div>
                <p class="text-4xl font-bold highlight">$157K+</p>
                <p class="text-sm">Projected Revenue</p>
            </div>
            <div>
                <p class="text-4xl font-bold highlight">~24%</p>
                <p class="text-sm">Net Profit Margin</p>
            </div>
        </div>
        <p class="mt-4 text-center text-sm italic">Our lean operations and high-value offering create immediate positive impact for artists and a strong financial foundation for us. This is the power of a truly <span class="highlight">strong deal for everyone involved.</span></p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-12">
      <div class="card chart-container">
        <h3 class="text-xl font-semibold mb-4 text-center">Revenue Forecast (Years 1-3) - Our Growth Fuels Artist Growth</h3>
        <canvas id="revenueChart"></canvas>
      </div>
      <div class="card chart-container">
        <h3 class="text-xl font-semibold mb-4 text-center">Customer Acquisition (Years 1-3) - Artists Choosing Freedom</h3>
        <canvas id="customerChart"></canvas>
      </div>
    </div>

    <div class="card mb-12">
        <h3 class="text-xl font-semibold mb-4 text-center">The Harsh Reality: Estimated Revenue Platforms/Distributors <span class="underline text-red-500">Take</span> From Artists (Est. 2025)</h3>
        <p class="text-sm mb-4 text-center">This pie illustrates their exploitative landscape where significant portions of revenue <span class="highlight">never reach artists directly</span>. Our model is the <span class="highlight">positive, charming alternative</span>.</p>
        <div class="pie-chart-container">
            <canvas id="platformRevenuePieChart"></canvas>
        </div>
        <p class="text-xs italic mt-2 text-center">Data derived from industry estimates. The slices represent portions of total generated value captured by intermediaries or the platforms themselves before the artist sees a fair share. <span class="highlight">RapidWebDevelop's strong deal: 0% commission on direct sales.</span></p>
    </div>
    
    <div class="card mb-12">
      <h3 class="text-xl font-semibold mb-4 text-center">Artist ROI: The RapidWebDevelop Advantage vs. Their System of Fees</h3>
      <p class="mb-4 text-sm text-center">It's not just about saving money; it's about <span class="highlight">reclaiming your earnings and future</span>. They burden you with endless fees AND take huge commissions. We offer a <span class="highlight">one-time investment for lifetime ownership and 100% of your sales revenue. This is the core of our strong deal.</span></p>
      <div class="chart-container h-64">
        <canvas id="artistROIChart"></canvas>
      </div>
      <p class="text-xs italic mt-2 text-center">A typical artist selling just $2000/year direct saves $180-$300 in commissions ALONE with us, ON TOP of no recurring platform fees. <span class="highlight">That's a strong, tangible benefit that they can't match.</span></p>
    </div>
    
    <div class="card">
      <h3 class="text-xl font-semibold mb-4 text-center">Key Investor Metrics (Our Strong, Positive Financial Outlook)</h3>
      <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
        <div class="bg-gray-800 p-4 rounded text-center">
          <p class="text-3xl font-bold text-red-500">~96%</p>
          <p class="text-sm">Gross Margin (Healthy & Sustainable)</p>
        </div>
        <div class="bg-gray-800 p-4 rounded text-center">
          <p class="text-3xl font-bold text-red-500">~66%</p>
          <p class="text-sm">Net Profit Margin (Year 3 Projection)</p>
        </div>
        <div class="bg-gray-800 p-4 rounded text-center">
          <p class="text-3xl font-bold text-red-500">3-5x+</p>
          <p class="text-sm">Projected Investor Return Multiple</p>
        </div>
        <div class="bg-gray-800 p-4 rounded text-center">
          <p class="text-3xl font-bold text-red-500"><2 yrs</p>
          <p class="text-sm">Projected Break-Even (Rapid Path to Profit)</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Investment Ask Page -->
  <section id="ask" class="page-section">
    <h2 class="text-4xl font-bold text-red-500 mb-8 text-center">Investment Ask: Fueling the Artist Empowerment Revolution</h2>
    <p class="text-lg mb-6 text-center">Agent Lee advises: This isn't just an investment in a company; it's an investment in a <span class="highlight">fairer, more profitable future for artists</span>. We offer a <span class="highlight">strong deal for investors</span> because our model is built on a <span class="highlight">strong deal for artists</span>. <span class="highlight">Our positive, charming outlook is backed by solid financials and a disruptive vision.</span></p>
    <div class="card mb-12">
      <h3 class="text-xl font-semibold mb-4 text-center">Funding Request: $200,000</h3>
      <div class="flex justify-center items-center">
        <div class="bg-red-500 bg-opacity-20 p-8 rounded-lg text-center">
          <p class="text-4xl font-bold">$200,000</p>
          <p class="text-lg mt-2">Pre-Seed Round (Convertible Note or SAFE)</p>
          <p class="text-xs italic mt-1">To accelerate our positive impact and <span class="highlight">promotional acquisition</span> of artists eager for change.</p>
        </div>
      </div>
    </div>
    
    <div class="card mb-12">
      <h3 class="text-xl font-semibold mb-4 text-center">Strategic Use of Funds (Over 12-18 Months)</h3>
      <p class="text-sm mb-2 text-center">Every dollar is aimed at expanding artist freedom and our reach, not on sustaining an exploitative model like theirs. <span class="highlight">This is smart capital for a strong future and a positive return.</span></p>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
        <div class="chart-container">
          <canvas id="fundingChart"></canvas>
        </div>
        <div>
          <ul class="list-disc pl-5 space-y-4 text-sm">
            <li><span class="highlight">Product Dev & R&D (35% - $70k):</span> Further enhance LEEWAY™ for even greater artist power; Develop our game-changing AI CRM v1.0 & automation tools; Pioneer AI content assistance features to help artists shine.</li>
            <li><span class="highlight">Marketing & Sales (30% - $60k):</span> Forge alliances with 20+ creative hubs that share our artist-first vision; Launch ethical digital marketing campaigns; Create compelling assets that tell the story of artist liberation; Attend key industry events to spread our <span class="highlight">charming message</span>.</li>
            <li><span class="highlight">Operations & Team (20% - $40k):</span> Build our passionate client success/support team; Cover essential legal/accounting; Improve our efficient delivery infrastructure; Support our founder's dedicated mission.</li>
            <li><span class="highlight">Pilot Program Expansion (15% - $30k):</span> Empower up to 50-75 diverse artists with subsidized platforms, generating powerful case studies and testimonials that showcase the <span class="highlight">positive transformation</span> and <span class="highlight">strong results</span> we enable.</li>
          </ul>
        </div>
      </div>
    </div>
    
    <div class="card">
      <h3 class="text-xl font-semibold mb-4 text-center">Proposed Terms (Reflecting a Strong, Fair Partnership)</h3>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
        <div class="bg-gray-800 p-4 rounded">
          <h4 class="font-semibold mb-2">Valuation Cap</h4>
          <p>$1.5M - $2M (SAFE/Note)</p>
        </div>
        <div class="bg-gray-800 p-4 rounded">
          <h4 class="font-semibold mb-2">Discount Rate</h4>
          <p>20% (SAFE/Note)</p>
        </div>
        <div class="bg-gray-800 p-4 rounded">
          <h4 class="font-semibold mb-2">Investor Perks</h4>
          <p>Board Observer Option, Quarterly Progress Updates, Early Access to Innovations</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Closing Page -->
  <section id="close" class="page-section">
    <div class="flex flex-col items-center justify-center text-center">
        <div class="agent-lee-card-placeholder mb-8">
            <p><i class="fas fa-handshake text-red-500"></i> <strong>Agent Lee (Closing):</strong> We've shown you the problem, our powerful solution, and the incredible opportunity. RapidWebDevelop, powered by the LEEWAY™ standard, offers a <span class="highlight">strong deal</span> for artists and a compelling, <span class="highlight">positive outlook</span> for investors. It's a <span class="highlight">charming</span> proposition, isn't it? Let's build this better future.</p>
        </div>
      <h2 class="text-4xl font-bold text-red-500 mb-6">Join Us: Invest in Artist Freedom & Own the Future They Deserve</h2>
      <p class="text-xl max-w-3xl mb-8">RapidWebDevelop is not just disrupting the creator economy; we are <span class="highlight">rebuilding it on a foundation of fairness, ownership, and artist prosperity</span>. Let's champion this <span class="highlight">positive, charming, and strong</span> future together.</p>
      
      <div class="w-full max-w-2xl mx-auto mb-8">
         <img src="fd6c2bae-5de2-4837-9054-ba6abb8587a8.png" alt="A diverse group of artists celebrating their success and ownership with RapidWebDevelop" class="rounded-lg shadow-xl">
      </div>
      
      <div class="mt-12 bg-gray-900 p-8 rounded-lg">
        <h3 class="text-2xl font-semibold mb-4">Let's Connect & Build a Better Industry</h3>
        <p class="text-lg mb-2">Leonard Lee | Founder & CEO (Milwaukee, WI)</p>
        <p class="text-lg mb-6"><a href="mailto:your.email@rapidwebdevelop.com" class="hover:text-red-400">your.email@rapidwebdevelop.com</a> | (414) 626-9992</p>
        <p class="text-lg mb-6">Website: <a href="https://RapidWebDevelop.com" target="_blank" rel="noopener noreferrer" class="hover:text-red-400">RapidWebDevelop.com</a></p>
        <a href="leewaystandard.html" target="_blank" class="bg-red-500 hover:bg-red-600 font-bold py-3 px-6 rounded-full transition duration-300 transform hover:scale-105 inline-block">
          View LEEWAY Standard Documentation
        </a>
      </div>
    </div>
  </section>

  <!-- Downloads Page -->
  <section id="downloads" class="page-section">
    <h2 class="text-4xl font-bold text-red-500 mb-8 text-center">Downloads & Resources</h2>
    <p class="text-lg mb-6 text-center">Thank you for your interest. Here you can download PDF versions of our Business Plan and the LEEWAY Standard documentation.</p>
    <div class="agent-lee-card-placeholder mb-8">
        <p><i class="fas fa-download text-red-500"></i> <strong>Agent Lee (Downloads):</strong> Excellent choice! For your convenience, offline versions are available. The LEEWAY Standard is particularly insightful – a testament to our commitment to transparency and a <span class="highlight">strong deal</span> for developers and artists alike. This <span class="highlight">positive outlook</span> extends to how we share information.</p>
    </div>
    <div class="flex flex-col md:flex-row justify-center items-center gap-8 mt-8">
        <div class="card text-center">
            <h3 class="text-xl font-semibold mb-3">Business Plan PDF</h3>
            <p class="text-sm mb-4">Download the complete RapidWebDevelop LLC Business Plan.</p>
            <button class="bg-red-500 hover:bg-red-600 font-bold py-2 px-4 rounded" onclick="alert('PDF download for Business Plan would be initiated here.')">
                <i class="fas fa-file-pdf mr-2"></i>Download Business Plan
            </button>
        </div>
        <div class="card text-center">
            <h3 class="text-xl font-semibold mb-3">LEEWAY Standard PDF</h3>
            <p class="text-sm mb-4">Download the full LEEWAY Standard technical documentation.</p>
            <button class="bg-red-500 hover:bg-red-600 font-bold py-2 px-4 rounded" onclick="alert('PDF download for LEEWAY Standard would be initiated here.')">
                 <i class="fas fa-file-code mr-2"></i>Download LEEWAY Standard
            </button>
        </div>
    </div>
    <p class="text-center mt-12 text-sm">To view the interactive LEEWAY Standard documentation, please use the main navigation link.</p>
  </section>


  <script>
    let charts = {}; // Object to hold chart instances

    function navigateToPage(pageId) {
      document.querySelectorAll('.page-section').forEach(page => {
        if (page.id === pageId) {
          page.classList.add('active');
        } else {
          page.classList.remove('active');
        }
      });
      
      document.querySelectorAll('.nav-link').forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('onclick') === `navigateToPage('${pageId}')`) {
            link.classList.add('active');
        }
      });
      window.scrollTo(0, 0);

      // Initialize or update charts for the now active page
      // Destroy charts on other pages to prevent rendering issues
      Object.keys(charts).forEach(chartKey => {
        if(charts[chartKey]) {
            const canvasElement = charts[chartKey].canvas;
            const parentSection = canvasElement.closest('.page-section');
            if(parentSection && parentSection.id !== pageId) {
                charts[chartKey].destroy();
                charts[chartKey] = null;
            }
        }
      });
      
      // Specific initialization logic based on pageId
      if (pageId === 'market' && !charts.marketChart) initializeMarketChart();
      if (pageId === 'model' && !charts.marginChart) initializeMarginChart();
      if (pageId === 'financials') {
        if (!charts.revenueChart) initializeRevenueChart(); else charts.revenueChart.update();
        if (!charts.customerChart) initializeCustomerChart(); else charts.customerChart.update();
        if (!charts.artistROIChart) initializeArtistROIChart(); else charts.artistROIChart.update();
        if (!charts.platformRevenuePieChart) initializePlatformRevenuePieChart(); else charts.platformRevenuePieChart.update();
      }
      if (pageId === 'ask' && !charts.fundingChart) initializeFundingChart(); else if (charts.fundingChart) charts.fundingChart.update();
      
      updateChartColors(); // Ensure colors are correct for the current theme
      
      // Notify Agent Lee of the section change (if available)
      if (window.agentLeeUI && typeof window.agentLeeUI.navigateToSection === 'function') {
        window.agentLeeUI.navigateToSection(pageId);
      }
    }
    
    const yearLabels = ['Year 1', 'Year 2', 'Year 3'];
    const oneTimeRevenue = [152250, 548100, 1169280];
    const recurringRevenue = [5700, 29100, 79200];
    const totalRevenueData = oneTimeRevenue.map((val, idx) => val + recurringRevenue[idx]);
    const customerAcquisitionData = [250, 900, 1920];
    const competitorAnnualCost = [440, 440, 440]; 
    const rwdCost = [609, 0, 0]; 
    const fundingLabels = ['Product Dev & R&D', 'Marketing & Sales', 'Operations & Team', 'Pilot Program Expansion'];
    const fundingData = [35, 30, 20, 15];
    
    const platformRevenueFullLabels = [
        'Pandora (~90% take)', 'SoundCloud (~90% take)', 'Facebook (est. ~90% take)', 'YouTube (~90-99% take)', 
        'Apple Music (~80-90% take)', 'Spotify (~80-90% take)', 'AWAL (15% commission)',
        'RouteNote Free (15% commission)', 'ONErpm (15% commission)', 'CD Baby (9% commission)',
        'Bandcamp (15% of sale)', 'RapidWebDevelop (0% of direct sale)'
    ];
    const platformRevenueValues = [14.9, 14.9, 14.9, 15.7, 14.1, 14.1, 2.5, 2.5, 2.5, 1.5, 1.5, 0.9 ]; // Added 0.9 for RWD to be visible
    const platformRevenueColors = [
        '#ADC8E6', '#FF69B4', '#6495ED', '#40E0D0', '#FFFACD', '#FFB6C1', 
        '#FFD700', '#DA70D6', '#800000', '#FA8072', '#FFA500', 
        '#22C55E' 
    ];

    function getChartOptions(titleText = null, isPie = false) {
        const textColor = getComputedStyle(document.documentElement).getPropertyValue('--chart-label-color').trim();
        const gridColor = getComputedStyle(document.documentElement).getPropertyValue('--chart-grid-color').trim();
        
        let options = {
            responsive: true, 
            maintainAspectRatio: false, 
            plugins: { 
                legend: { 
                    position: isPie ? 'right' : 'top', 
                    labels: { 
                        color: textColor, 
                        padding: isPie ? 5 : 15, 
                        boxWidth: 12,
                        font: { size: isPie ? 9 : Chart.defaults.font.size }
                    } 
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            let label = context.label || '';
                            if (label) { label += ': '; }
                            if (context.parsed !== null) { 
                                if(isPie || context.dataset.label.includes("Revenue") || context.dataset.label.includes("Cost")){
                                   label += context.parsed.toFixed(1) + (isPie ? '%' : '');
                                } else {
                                   label += context.parsed;
                                }
                            }
                            return label;
                        }
                    }
                }
            }
        };
        if (titleText) {
            options.plugins.title = { display: true, text: titleText, color: textColor, font: {size: 16}, padding:10 };
        }
        if (!isPie) {
            options.scales = { 
                x: { ticks: { color: textColor, font:{size:10} }, grid: { color: gridColor } }, 
                y: { ticks: { color: textColor, font:{size:10} }, grid: { color: gridColor } } 
            };
        }
        return options;
    }
    
    function initializeMarketChart() {
      const canvas = document.getElementById('marketChart');
      if (!canvas || charts.marketChart) return;
      charts.marketChart = new Chart(canvas.getContext('2d'), {
        type: 'line',
        data: { labels: ['2024', '2025', '2026', '2027', '2028'], datasets: [{ label: 'Artists Seeking Ownership Solutions (Illustrative)', data: [150000, 275000, 500000, 800000, 1200000], borderColor: 'var(--highlight-color)', backgroundColor: 'rgba(248, 113, 113, 0.1)', tension: 0.4 }] },
        options: getChartOptions('Market Growth Potential')
      });
    }

    function initializeMarginChart() {
      const canvas = document.getElementById('marginChart');
      if (!canvas || charts.marginChart) return;
      let chartOptions = getChartOptions();
      chartOptions.plugins.legend.display = false;
      chartOptions.scales.y.ticks.callback = function(value) { return '$' + value.toFixed(2); };
      charts.marginChart = new Chart(canvas.getContext('2d'), {
        type: 'bar',
        data: { labels: ['Variable Cost/Unit', 'ASP', 'Gross Profit/Unit'], datasets: [{ label: 'Per Unit Economics ($)', data: [25 + (609*0.029), 609, 609 - (25 + (609*0.029))], backgroundColor: ['rgba(59, 130, 246, 0.7)', 'rgba(16, 185, 129, 0.7)', 'var(--highlight-color)'], borderColor: ['rgb(59, 130, 246)', 'rgb(16, 185, 129)', 'var(--highlight-color)'], borderWidth: 1 }] },
        options: chartOptions
      });
    }

    function initializeRevenueChart() {
      const canvas = document.getElementById('revenueChart');
      if (!canvas || charts.revenueChart) return;
      let chartOptions = getChartOptions();
      chartOptions.scales.y.type = 'linear';
      chartOptions.scales.y.position = 'left';
      chartOptions.scales.y.ticks.callback = function(value) { return '$' + value/1000 + 'k'; };
      charts.revenueChart = new Chart(canvas.getContext('2d'), {
        type: 'bar', // Changed to bar for better visual differentiation
        data: { labels: yearLabels, datasets: [ 
            { label: 'One-Time Revenue ($)', data: oneTimeRevenue, backgroundColor: 'var(--highlight-color)', yAxisID: 'y' }, 
            { label: 'Recurring Revenue ($)', data: recurringRevenue, backgroundColor: 'rgba(52, 211, 153, 0.7)', yAxisID: 'y' } 
        ] },
        options: chartOptions
      });
    }
    
    function initializeCustomerChart() {
      const canvas = document.getElementById('customerChart');
      if (!canvas || charts.customerChart) return;
      let chartOptions = getChartOptions();
      chartOptions.plugins.legend.display = false;
      charts.customerChart = new Chart(canvas.getContext('2d'), {
        type: 'bar',
        data: { labels: yearLabels, datasets: [{ label: 'Artist Platforms Delivered', data: customerAcquisitionData, backgroundColor: 'rgba(16, 185, 129, 0.7)' }] },
        options: chartOptions
      });
    }

    function initializeArtistROIChart() {
      const canvas = document.getElementById('artistROIChart');
      if (!canvas || charts.artistROIChart) return;
      let chartOptions = getChartOptions();
      chartOptions.scales.y.ticks.callback = function(value) { return '$' + value; };
      charts.artistROIChart = new Chart(canvas.getContext('2d'), {
        type: 'bar',
        data: { labels: yearLabels, datasets: [ { label: 'Typical Platform Costs (Fees & Commissions)', data: competitorAnnualCost, backgroundColor: 'rgba(239, 68, 68, 0.7)' },  { label: 'RapidWebDevelop Cost (One-Time Fee)', data: rwdCost, backgroundColor: 'rgba(16, 185, 129, 0.7)' } ] },
        options: chartOptions
      });
    }

    function initializeFundingChart() {
      const canvas = document.getElementById('fundingChart');
      if (!canvas || charts.fundingChart) return;
      let chartOptions = getChartOptions(null, true); // True for isPie
      chartOptions.plugins.legend.position = 'bottom';
      charts.fundingChart = new Chart(canvas.getContext('2d'), {
        type: 'doughnut',
        data: { labels: fundingLabels, datasets: [{ data: fundingData, backgroundColor: ['rgba(59, 130, 246, 0.8)', 'rgba(16, 185, 129, 0.8)', 'rgba(239, 68, 68, 0.8)', 'rgba(245, 158, 11, 0.8)'], borderColor: 'var(--bg-color)', borderWidth: 2 }] },
        options: chartOptions
      });
    }

    function initializePlatformRevenuePieChart() {
        const canvas = document.getElementById('platformRevenuePieChart');
        if (!canvas || charts.platformRevenuePieChart) return;
        let chartOptions = getChartOptions(null, true); // True for isPie
        charts.platformRevenuePieChart = new Chart(canvas.getContext('2d'), {
            type: 'pie',
            data: {
                labels: platformRevenueFullLabels,
                datasets: [{
                    label: 'Est. Revenue Taken by Platforms/Distributors',
                    data: platformRevenueValues,
                    backgroundColor: platformRevenueColors,
                    borderColor: 'var(--bg-color)',
                    borderWidth: 1
                }]
            },
            options: chartOptions
        });
    }

    function updateChartColors() {
        const textColor = getComputedStyle(document.documentElement).getPropertyValue('--chart-label-color').trim();
        const gridColor = getComputedStyle(document.documentElement).getPropertyValue('--chart-grid-color').trim();
        const highlightColor = getComputedStyle(document.documentElement).getPropertyValue('--highlight-color').trim();
        const bgColor = getComputedStyle(document.documentElement).getPropertyValue('--bg-color').trim();

        for (const chartKey in charts) {
            if (charts[chartKey] && charts[chartKey].options) {
                const chart = charts[chartKey];
                const isPieOrDoughnut = chart.config.type === 'pie' || chart.config.type === 'doughnut';

                if (chart.options.plugins.legend) {
                    chart.options.plugins.legend.labels.color = textColor;
                }
                if (chart.options.plugins.title) {
                    chart.options.plugins.title.color = textColor;
                }
                if (!isPieOrDoughnut && chart.options.scales) {
                    if(chart.options.scales.x) {
                        chart.options.scales.x.ticks.color = textColor;
                        chart.options.scales.x.grid.color = gridColor;
                    }
                    if(chart.options.scales.y) {
                        chart.options.scales.y.ticks.color = textColor;
                        chart.options.scales.y.grid.color = gridColor;
                    }
                }
                chart.data.datasets.forEach(dataset => {
                    if(dataset.borderColor === 'var(--highlight-color)' || dataset.borderColor === '#f87171' || dataset.borderColor === '#ef4444' || dataset.borderColor === '#d92626') dataset.borderColor = highlightColor;
                    if(dataset.backgroundColor === 'var(--highlight-color)' || dataset.backgroundColor === '#f87171' || dataset.backgroundColor === '#ef4444' || dataset.backgroundColor === '#d92626') dataset.backgroundColor = highlightColor;
                    if (dataset.borderColor === 'var(--bg-color)' || dataset.borderColor === '#000' || dataset.borderColor === '#f0f2f5') dataset.borderColor = bgColor; // For doughnut/pie borders
                });
                chart.update('none'); // 'none' for no animation during update
            }
        }
    }

    window.onload = function() {
      document.querySelector('.nav-link[onclick="navigateToPage(\'intro\')"]').classList.add('active');
      navigateToPage('intro'); // Initialize with the intro page, which will handle its charts (if any)

      const themeToggle = document.getElementById('theme-toggle');
      const docElement = document.documentElement;
      
      if (localStorage.getItem('theme') === 'light') {
        docElement.classList.add('light-mode');
        docElement.classList.remove('dark');
        themeToggle.textContent = '🌙';
      } else {
        docElement.classList.add('dark'); 
        docElement.classList.remove('light-mode');
        themeToggle.textContent = '☀️';
      }
      setTimeout(updateChartColors, 50);

      themeToggle.addEventListener('click', () => {
        docElement.classList.toggle('light-mode');
        docElement.classList.toggle('dark');
        const isLightMode = docElement.classList.contains('light-mode');
        localStorage.setItem('theme', isLightMode ? 'light' : 'dark');
        themeToggle.textContent = isLightMode ? '🌙' : '☀️';
        updateChartColors();
      });
      
      // Global Settings Modal
      const settingsModal = document.getElementById('settings-modal');
      const openSettings = document.getElementById('open-settings');
      const settingsBackdrop = document.getElementById('settings-backdrop');
      const cancelSettings = document.getElementById('cancel-settings');
      const saveSettings = document.getElementById('save-settings');
      const themeDark = document.getElementById('theme-dark');
      const themeLight = document.getElementById('theme-light');
      const globalLanguage = document.getElementById('global-language');
      const voiceEnabled = document.getElementById('voice-enabled');
      const voiceSelect = document.getElementById('voice-select');
      const voiceSpeed = document.getElementById('voice-speed');
      const voiceSpeedValue = document.getElementById('voice-speed-value');
      
      // Update theme buttons based on current theme
      function updateThemeButtons() {
        const isLight = docElement.classList.contains('light-mode');
        themeDark.classList.toggle('bg-accent-color', !isLight);
        themeDark.classList.toggle('text-white', !isLight);
        themeLight.classList.toggle('bg-accent-color', isLight);
        themeLight.classList.toggle('text-white', isLight);
      }
      
      // Populate voice select
      function populateVoiceSelect() {
        if (!window.speechSynthesis) return;
        
        // Clear current options
        voiceSelect.innerHTML = '';
        
        // Get all available voices
        const voices = window.speechSynthesis.getVoices();
        
        // Filter voices by selected language
        const lang = globalLanguage.value;
        const languageVoices = voices.filter(voice => 
          voice.lang.startsWith(lang) || 
          voice.lang.startsWith(lang.split('-')[0])
        );
        
        // Use language voices if available, otherwise show all
        const voicesToShow = languageVoices.length > 0 ? languageVoices : voices;
        
        // Add options
        voicesToShow.forEach(voice => {
          const option = document.createElement('option');
          option.value = voice.voiceURI;
          option.text = `${voice.name} (${voice.lang})${voice.localService ? ' - Local' : ''}`;
          voiceSelect.appendChild(option);
        });
        
        // If no voices, show message
        if (voicesToShow.length === 0) {
          const option = document.createElement('option');
          option.value = '';
          option.text = 'No voices available';
          voiceSelect.appendChild(option);
        }
      }
      
      // Initialize UI based on Agent Lee settings (if available)
      function syncSettingsWithAgentLee() {
        if (window.agentLeeSettings) {
          // Language
          if (agentLeeSettings.language && agentLeeSettings.language.current) {
            globalLanguage.value = agentLeeSettings.language.current;
          }
          
          // Voice enabled
          if (agentLeeSettings.voice) {
            voiceEnabled.checked = agentLeeSettings.voice.enabled;
            voiceSpeed.value = agentLeeSettings.voice.rate;
            voiceSpeedValue.textContent = agentLeeSettings.voice.rate;
          }
          
          // Populate voice select
          populateVoiceSelect();
          
          // Select current voice
          if (agentLeeSettings.voice && agentLeeSettings.voice.voiceURI && voiceSelect.options.length > 0) {
            voiceSelect.value = agentLeeSettings.voice.voiceURI;
          }
        }
      }
      
      // Open settings modal
      openSettings.addEventListener('click', () => {
        updateThemeButtons();
        syncSettingsWithAgentLee();
        settingsModal.classList.remove('hidden');
      });
      
      // Close settings modal
      function closeSettingsModal() {
        settingsModal.classList.add('hidden');
      }
      
      settingsBackdrop.addEventListener('click', closeSettingsModal);
      cancelSettings.addEventListener('click', closeSettingsModal);
      
      // Theme selection
      themeDark.addEventListener('click', () => {
        docElement.classList.remove('light-mode');
        docElement.classList.add('dark');
        localStorage.setItem('theme', 'dark');
        themeToggle.textContent = '☀️';
        updateChartColors();
        updateThemeButtons();
      });
      
      themeLight.addEventListener('click', () => {
        docElement.classList.add('light-mode');
        docElement.classList.remove('dark');
        localStorage.setItem('theme', 'light');
        themeToggle.textContent = '🌙';
        updateChartColors();
        updateThemeButtons();
      });
      
      // Voice speed slider
      voiceSpeed.addEventListener('input', () => {
        voiceSpeedValue.textContent = voiceSpeed.value;
      });
      
      // Language change
      globalLanguage.addEventListener('change', () => {
        populateVoiceSelect();
      });
      
      // Save settings
      saveSettings.addEventListener('click', () => {
        // Apply settings to Agent Lee if available
        if (window.agentLeeSettings) {
          // Language
          if (window.i18n && typeof window.i18n.setLanguage === 'function') {
            window.i18n.setLanguage(globalLanguage.value);
          } else {
            agentLeeSettings.language.current = globalLanguage.value;
          }
          
          // Voice settings
          agentLeeSettings.voice.enabled = voiceEnabled.checked;
          agentLeeSettings.voice.rate = parseFloat(voiceSpeed.value);
          agentLeeSettings.voice.voiceURI = voiceSelect.value;
          
          // Update UI if needed
          if (window.agentLeeUI && typeof window.agentLeeUI.updateTexts === 'function') {
            window.agentLeeUI.updateTexts();
          }
        }
        
        closeSettingsModal();
      });
      
      // Initialize voices when available
      if (window.speechSynthesis) {
        if (speechSynthesis.onvoiceschanged !== undefined) {
          speechSynthesis.onvoiceschanged = populateVoiceSelect;
        } else {
          setTimeout(populateVoiceSelect, 200);
        }
      }
    };
  </script>

<!-- Removed Agent Lee Chat Popup -->

  <script>
    // Initialize settings structure for Agent Lee
    if (!window.agentLeeSettings) {
      window.agentLeeSettings = {
        voice: {
          enabled: true,
          rate: 1.0,
          voiceURI: ''
        },
        navigation: {
          fullControl: false,
          autoAnnounce: true
        },
        language: {
          current: 'en'
        }
      };
    }
    
    // Simple Agent Lee functionality
    const micButtons = document.querySelectorAll('.agent-lee-mic-button');
    
    // Section responses
    const sectionResponses = {
      'intro': "Welcome to RapidWebDevelop! We're revolutionizing how artists own their digital presence. Our platform offers true ownership with no recurring fees.",
      'problem': "The current creator economy exploits artists with endless fees and revenue cuts. Artists are trapped in a system designed to profit from their struggle.",
      'solution': "We offer complete platform ownership through our LEEWAY™ standard - one payment, 100% revenue retention, and true independence from predatory platforms.",
      'product': "Our tiered packages ($399-$1299+) deliver complete digital universes - media galleries, stores, fan engagement tools - all owned by the artist forever.",
      'market': "Independent artists are demanding alternatives. Our initial market of 10,000-15,000 Midwest artists represents a movement ready for change.",
      'model': "We profit through artist empowerment, not exploitation. 96% gross margins enable us to offer incredible value while building a sustainable business.",
      'traction': "We have validated technology, growing partnerships with creative hubs like MARN and Backline, and overwhelmingly positive artist feedback.",
      'team': "Led by passionate artist advocates with deep technical expertise, we're building technology that serves artists, not platform profits.",
      'financials': "Year 1 targets: 250+ artists empowered, $157K+ revenue, 24% net margin. Our success is directly tied to artist success.",
      'ask': "We're seeking $200K to accelerate artist empowerment and scale our revolutionary platform. Join us in building a fairer creator economy.",
      'downloads': "Download our business plan and LEEWAY Standard documentation to learn more about our revolutionary approach to artist empowerment."
    };
    
    // Speak the current section content automatically
    function speakCurrentSection() {
      const activeSection = document.querySelector('.page-section.active');
      if (activeSection && activeSection.id) {
        const sectionId = activeSection.id;
        const response = sectionResponses[sectionId];
        
        if (response && 'speechSynthesis' in window) {
          // Cancel any ongoing speech
          window.speechSynthesis.cancel();
          
          // Create and configure utterance
          const utterance = new SpeechSynthesisUtterance(response);
          utterance.rate = 1.0;
          utterance.pitch = 1.0;
          utterance.volume = 1.0;
          
          // Start speaking
          window.speechSynthesis.speak(utterance);
          
          // Log for debugging
          console.log("Speaking:", response);
        }
      }
    }
    
    // Automatically speak when page loads
    window.addEventListener('load', function() {
      speakCurrentSection();
      
      // Try again after a short delay to ensure voices are loaded
      setTimeout(speakCurrentSection, 500);
      setTimeout(speakCurrentSection, 1000);
      setTimeout(speakCurrentSection, 2000);
    });
    
    // Update the original navigation function to speak when changing sections
    const originalNavigateToPage = window.navigateToPage;
    window.navigateToPage = function(pageId) {
      if (typeof originalNavigateToPage === 'function') {
        originalNavigateToPage(pageId);
        
        // Speak the new section content
        setTimeout(speakCurrentSection, 500);
      }
    };
    
    // Button handlers
    document.addEventListener('DOMContentLoaded', function() {
      // Mic button handler
      const micButton = document.getElementById('agent-mic');
      if (micButton) {
        micButton.addEventListener('click', () => {
          // Basic voice recognition if available
          if ('webkitSpeechRecognition' in window) {
            const recognition = new webkitSpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = false;
            recognition.lang = 'en-US';
            
            recognition.onresult = function(event) {
              const command = event.results[0][0].transcript.toLowerCase();
              handleVoiceCommand(command);
            };
            
            recognition.start();
          } else {
            alert("Voice recognition not available in this browser. Try Chrome for voice features!");
          }
        });
      }
      
      // Stop button handler
      const stopButton = document.getElementById('agent-stop');
      if (stopButton) {
        stopButton.addEventListener('click', () => {
          // Cancel any ongoing speech
          if ('speechSynthesis' in window) {
            window.speechSynthesis.cancel();
          }
        });
      }
    });
    
    // Voice command handler
    function handleVoiceCommand(command) {
      if (command.includes('problem')) {
        navigateToPage('problem');
      } else if (command.includes('solution')) {
        navigateToPage('solution');
      } else if (command.includes('product')) {
        navigateToPage('product');
      } else if (command.includes('market')) {
        navigateToPage('market');
      } else if (command.includes('model') || command.includes('business')) {
        navigateToPage('model');
      } else if (command.includes('traction')) {
        navigateToPage('traction');
      } else if (command.includes('team')) {
        navigateToPage('team');
      } else if (command.includes('financial')) {
        navigateToPage('financials');
      } else if (command.includes('ask') || command.includes('investment')) {
        navigateToPage('ask');
      } else if (command.includes('intro') || command.includes('home')) {
        navigateToPage('intro');
      } else if (command.includes('download')) {
        navigateToPage('downloads');
      } else {
        alert(`I heard "${command}". Try saying things like "go to solution" or "show me the problem".`);
        // Speak the current section again
        speakCurrentSection();
      }
    }
  </script>
  
  <!-- Simple Agent Lee Functionality -->
  <script>
    // Agent Lee messages
    const agentLeeMessages = {
      welcome: "Hello, I'm Agent Lee — your guide to launching your digital voice. Whether you're an artist, content creator, influencer, or visionary — I'm here to help you take control.",
      intro: "Let me show you around! Whether you're an artist, content creator, influencer, or podcaster, our platform is built for all independent digital voices. Our navigation menu takes you through everything you need to know.",
      problemSection: "The current creator economy exploits content creators with endless fees and revenue cuts. Creators — whether artists, influencers, bloggers, podcasters, or visionaries — are trapped in a system designed to profit from their struggle.",
      solutionSection: "We offer complete platform ownership through our LEEWAY™ standard — whether you're a musician, social media influencer, blogger, or podcaster — one payment, 100% revenue retention, and true independence from predatory platforms.",
      productSection: "Our tiered packages ($399-$1299+) deliver complete digital universes - media galleries, stores, fan engagement tools - all owned by the artist forever.",
      marketSection: "Independent artists are demanding alternatives. Our initial market of 10,000-15,000 Midwest artists represents a movement ready for change.",
      modelSection: "We profit through artist empowerment, not exploitation. 96% gross margins enable us to offer incredible value while building a sustainable business.",
      tractionSection: "We have validated technology, growing partnerships with creative hubs like MARN and Backline, and overwhelmingly positive artist feedback.",
      teamSection: "Led by passionate artist advocates with deep technical expertise, we're building technology that serves artists, not platform profits.",
      financialsSection: "Year 1 targets: 250+ artists empowered, $157K+ revenue, 24% net margin. Our success is directly tied to artist success.",
      askSection: "We're seeking $200K to accelerate artist empowerment and scale our revolutionary platform. Join us in building a fairer creator economy.",
      downloadsSection: "Download our business plan and LEEWAY Standard documentation to learn more about our revolutionary approach to artist empowerment."
    };
    
    // Setup speech synthesis
    if (!('speechSynthesis' in window)) {
      window.speechSynthesis = {
        speaking: false,
        speak: function(utterance) {
          console.log("Speech synthesis not supported, would say:", utterance.text);
          this.speaking = true;
          // Simulate speech ending
          setTimeout(() => { this.speaking = false; }, 2000);
        },
        cancel: function() {
          this.speaking = false;
        }
      };
      
      window.SpeechSynthesisUtterance = function(text) {
        this.text = text;
        this.rate = 1.0;
        this.pitch = 1.0;
        this.volume = 1.0;
      };
    }
    
    // Removed Agent Lee button functions - now using the global Agent Lee functionality
      
      // Update original navigation function
      const originalNavigateToPage = window.navigateToPage;
      window.navigateToPage = function(pageId) {
        if (typeof originalNavigateToPage === 'function') {
          originalNavigateToPage(pageId);
          
          // Speak about the new section
          const messageKey = pageId + 'Section';
          if (agentLeeMessages[messageKey]) {
            setTimeout(function() {
              agentSpeak(agentLeeMessages[messageKey]);
            }, 500);
          }
        }
      };
      
      // Introduction on page load
      setTimeout(function() {
        agentSpeak(agentLeeMessages.welcome);
      }, 1000);
    });
  </script>
  </script>

  <!-- Removed the purple Agent Lee button -->
  
  <!-- Add Agent Lee Scripts -->
  <script src="js/agent-faq.js"></script>
  <script src="js/agent-lee.js"></script>
</body>
</html>






























































<!-- 🟢 START: CORE - Embedded LEEWAY Standard Section (from index.html) -->
  <div id="leeway-standard-content-wrapper" class="hidden">
    <div class="leeway-standard-header">
        <span class="title">LEEWAY™ Standard Documentation</span>
        <button type="button" class="close-btn" onclick="toggleLeewayStandardView()"><i class="fas fa-times mr-1"></i> Close</button>
    </div>
    <div class="leeway-standard-body">
        <!-- Sidebar from index.html -->
        <aside class="leeway-sidebar">
            <div class="sidebar-header">
                <h1 class="sidebar-title">LEEWAY</h1>
                <div class="sidebar-version">Version 1.0</div>
            </div>
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <div class="nav-section-title">Getting Started</div>
                    <ul class="nav-items">
                        <li class="nav-item"><a href="#introduction-section" class="nav-link active" onclick="navigateToLeewaySection('introduction-section', this)">Introduction</a></li>
                        <li class="nav-item"><a href="#overview-section" class="nav-link" onclick="navigateToLeewaySection('overview-section', this)">Overview</a></li>
                        <li class="nav-item"><a href="#quickstart-guide" class="nav-link" onclick="navigateToLeewaySection('quickstart-guide', this)">Quick Start</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">Core Principles</div>
                    <ul class="nav-items">
                        <li class="nav-item"><a href="#core-principles-intro" class="nav-link" onclick="navigateToLeewaySection('core-principles-intro', this)">Principles Overview</a></li>
                        <li class="nav-item"><a href="#core-principles-modularization" class="nav-link" onclick="navigateToLeewaySection('core-principles-modularization', this)">Modularization</a></li>
                        <li class="nav-item"><a href="#core-principles-colorization" class="nav-link" onclick="navigateToLeewaySection('core-principles-colorization', this)">Colorization</a></li>
                        <li class="nav-item"><a href="#core-principles-semantic-tagging" class="nav-link" onclick="navigateToLeewaySection('core-principles-semantic-tagging', this)">Semantic Tagging</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">MCP Components</div>
                    <ul class="nav-items">
                        <li class="nav-item"><a href="#mcp-components-intro" class="nav-link" onclick="navigateToLeewaySection('mcp-components-intro', this)">MCP Overview</a></li>
                        <li class="nav-item"><a href="#mcp-components-memory" class="nav-link" onclick="navigateToLeewaySection('mcp-components-memory', this)">Memory</a></li>
                        <li class="nav-item"><a href="#mcp-components-communication" class="nav-link" onclick="navigateToLeewaySection('mcp-components-communication', this)">Communication</a></li>
                        <li class="nav-item"><a href="#mcp-components-processing" class="nav-link" onclick="navigateToLeewaySection('mcp-components-processing', this)">Processing</a></li>
                        <li class="nav-item"><a href="#mcp-components-search" class="nav-link" onclick="navigateToLeewaySection('mcp-components-search', this)">Search</a></li>
                        <li class="nav-item"><a href="#mcp-components-scheduling" class="nav-link" onclick="navigateToLeewaySection('mcp-components-scheduling', this)">Scheduling</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">Implementation</div>
                    <ul class="nav-items">
                        <li class="nav-item"><a href="#implementation-process-intro" class="nav-link" onclick="navigateToLeewaySection('implementation-process-intro', this)">Process Overview</a></li>
                        <li class="nav-item"><a href="#implementation-process-error-handling" class="nav-link" onclick="navigateToLeewaySection('implementation-process-error-handling', this)">Error Handling</a></li>
                        <li class="nav-item"><a href="#implementation-process-seo-enhancements" class="nav-link" onclick="navigateToLeewaySection('implementation-process-seo-enhancements', this)">SEO Enhancements</a></li>
                        <li class="nav-item"><a href="#implementation-process-file-embedding" class="nav-link" onclick="navigateToLeewaySection('implementation-process-file-embedding', this)">File Embedding</a></li>
                        <li class="nav-item"><a href="#implementation-process-optimization" class="nav-link" onclick="navigateToLeewaySection('implementation-process-optimization', this)">Optimization</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">Advanced Topics</div>
                    <ul class="nav-items">
                        <li class="nav-item"><a href="#advanced-topics-intro" class="nav-link" onclick="navigateToLeewaySection('advanced-topics-intro', this)">Advanced Overview</a></li>
                        <li class="nav-item"><a href="#advanced-topics-self-repair" class="nav-link" onclick="navigateToLeewaySection('advanced-topics-self-repair', this)">Self-Repair Hooks</a></li>
                        <li class="nav-item"><a href="#advanced-topics-logging-standards" class="nav-link" onclick="navigateToLeewaySection('advanced-topics-logging-standards', this)">Logging Standards</a></li>
                        <li class="nav-item"><a href="#advanced-topics-in-code-documentation" class="nav-link" onclick="navigateToLeewaySection('advanced-topics-in-code-documentation', this)">In-Code Documentation</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">Artifacts</div>
                    <ul class="nav-items">
                        <li class="nav-item"><a href="#artifact-tool-handlers-ps1" class="nav-link" onclick="navigateToLeewaySection('artifact-tool-handlers-ps1', this)">Tool Handler (PS)</a></li>
                        <li class="nav-item"><a href="#artifact-tool-handlers-js" class="nav-link" onclick="navigateToLeewaySection('artifact-tool-handlers-js', this)">Tool Handler (JS)</a></li>
                        <li class="nav-item"><a href="#artifact-leeway-protocol-json" class="nav-link" onclick="navigateToLeewaySection('artifact-leeway-protocol-json', this)">Protocol (JSON)</a></li>
                        <li class="nav-item"><a href="#artifact-vscode-extension-package-json" class="nav-link" onclick="navigateToLeewaySection('artifact-vscode-extension-package-json', this)">VSCode Ext (package)</a></li>
                        <li class="nav-item"><a href="#artifact-vscode-extension-extension-js" class="nav-link" onclick="navigateToLeewaySection('artifact-vscode-extension-extension-js', this)">VSCode Ext (JS)</a></li>
                        <li class="nav-item"><a href="#artifact-vscode-extension-styles-css" class="nav-link" onclick="navigateToLeewaySection('artifact-vscode-extension-styles-css', this)">VSCode Ext (CSS)</a></li>
                        <li class="nav-item"><a href="#artifact-vscode-extension-readme-md" class="nav-link" onclick="navigateToLeewaySection('artifact-vscode-extension-readme-md', this)">VSCode Ext (README)</a></li>
                    </ul>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">Resources</div>
                    <ul class="nav-items">
                        <li class="nav-item"><a href="#resources-examples" class="nav-link" onclick="navigateToLeewaySection('resources-examples', this)">Code Examples</a></li>
                        <li class="nav-item"><a href="#resources-templates" class="nav-link" onclick="navigateToLeewaySection('resources-templates', this)">Templates</a></li>
                        <li class="nav-item"><a href="#resources-faq" class="nav-link" onclick="navigateToLeewaySection('resources-faq', this)">FAQ</a></li>
                    </ul>
                </div>
            </nav>
        </aside>

        <!-- Main content from index.html -->
        <main class="leeway-main-content">
            <input type="text" id="leeway-doc-search-input" aria-label="Search LEEWAY documentation" placeholder="Search LEEWAY documentation...">
            <div id="leeway-doc-search-results" style="display: none;"></div>

            <section id="introduction-section" class="leeway-page-section active">
                <h1 class="section-title">LEEWAY System: Introduction</h1>
                <div class="doc-content">
                    <h1>LEEWAY System: Full Documentation &amp; Artifacts</h1>
                    <p>Welcome to the comprehensive documentation for the LEEWAY™ system. This single HTML file contains the full description of the LEEWAY Standard, its principles, components, implementation details, advanced topics, and key code artifacts discussed during its development. It embodies the LEEWAY principle of File Embedding, providing a self-contained resource for understanding and implementing the standard.</p>
                     <div class="callout callout-info">
                        <div class="callout-title"><i class="fas fa-info-circle"></i> What&apos;s Inside</div>
                        <p>This interactive document includes:</p>
                        <ul>
                            <li>Detailed explanations of LEEWAY principles and components.</li>
                            <li>Practical guidance on implementation techniques (Error Handling, SEO, Optimization, File Embedding).</li>
                            <li>Advanced concepts like Self-Repair Hooks, Logging, and In-Code Documentation.</li>
                            <li>Full source code examples for key artifacts like tool handlers, the protocol JSON, and the VS Code extension files.</li>
                        </ul>
                         <p>Use the navigation sidebar to jump between sections, or ask Agent Lee for assistance!</p>
                    </div>
                    <p>The LEEWAY Standard is designed to create web applications that are not only powerful and feature-rich but also transparent, maintainable, and inherently understandable by both human developers and advanced AI agents. This document serves as your guide to mastering this paradigm.</p>
                </div>
            </section>

            <section id="overview-section" class="leeway-page-section">
                 <h1 class="section-title">Overview - LEEWAY Standard</h1>
                <div class="doc-content">
                    <div id="overview-intro-doc" class="leeway-region region-core" data-region-label="🟢 Core: Introduction">
                        <h2>Overview - LEEWAY Standard</h2>
                        <p>The LEEWAY Standard is a comprehensive framework for building modular, colorized, and AI-ready web applications. It provides a structured approach to web development that emphasizes organization, maintainability, and future-proofing.</p>
                        <p>LEEWAY stands for <strong>L</strong>ogically <strong>E</strong>nhanced <strong>W</strong>eb <strong>E</strong>ngineering <strong>A</strong>rchitecture <strong>Y</strong>ield, reflecting its goal of producing high-quality, well-structured web applications that are both human and AI-friendly.</p>
                        <div class="callout callout-info">
                            <div class="callout-title"><i class="fas fa-lightbulb"></i> LEEWAY at a Glance</div>
                            <p>LEEWAY is not just a coding standard but a comprehensive approach to web development that addresses structure, styling, functionality, SEO, error handling, and documentation in a unified framework.</p>
                        </div>
                         <h3 class="content-heading">The Single-File Philosophy</h3>
                         <p>At its heart, LEEWAY champions the power and simplicity of a single HTML file. This approach offers:
                             <ul>
                                <li><strong>Zero Build Complexity:</strong> Write code directly in the HTML file. No Webpack, Parcel, or other bundlers are strictly necessary for core functionality.</li>
                                <li><strong>Ultimate Portability:</strong> The entire application is one file, easily shared, hosted, and versioned.</li>
                                <li><strong>Atomic Deployments:</strong> Updating the application can be as simple as replacing a single file.</li>
                                <li><strong>Reduced Cognitive Load:</strong> Developers focus on one coherent codebase rather than managing hundreds of interlinked files and complex build configurations for the primary application structure.</li>
                             </ul>
                         </p>
                         <p>This is made manageable and powerful through strict adherence to Modularization, Colorization, and Semantic Tagging, which prevent the single file from becoming a monolith of spaghetti code.</p>
                    </div>
                 </div>
             </section>

            <section id="core-principles-intro" class="leeway-page-section">
                 <h1 class="section-title">Core Principles of LEEWAY</h1>
                <div class="doc-content">
                    <div id="core-principles-key-doc" class="leeway-region region-core" data-region-label="🟢 Core: Key Principles">
                        <h2>Core Principles</h2>
                        <p>The LEEWAY Standard is built on several key principles that guide its implementation:</p>
                        <div class="principles-grid">
                            <div class="principle-card">
                                <div class="principle-icon">🧩</div>
                                <h3>Modularization</h3>
                                <p>Every logical block (function, controller, UI component, SEO section) must be isolated into a distinct labeled region.</p>
                            </div>
                            <div class="principle-card">
                                <div class="principle-icon">🎨</div>
                                <h3>Colorization</h3>
                                <p>Color-coding is used to visually distinguish different types of components, making the code more readable and navigable.</p>
                            </div>
                            <div class="principle-card">
                                <div class="principle-icon">🧠</div>
                                <h3>Semantic Tagging</h3>
                                <p>Every section, div, and major content block must have a unique, semantically named ID for better navigation and AI understanding.</p>
                            </div>
                            <div class="principle-card">
                                <div class="principle-icon">📈</div>
                                <h3>SEO Enhancements</h3>
                                <p>Important sections include embedded JSON-LD schema metadata, and all internal navigation is optimized for search engines.</p>
                            </div>
                            <div class="principle-card">
                                <div class="principle-icon">🔒</div>
                                <h3>Error Handling</h3>
                                <p>Every JavaScript operation includes proper error handling with try/catch blocks and fallbacks for better reliability.</p>
                            </div>
                            <div class="principle-card">
                                <div class="principle-icon">📦</div>
                                <h3>File Embedding</h3>
                                <p>JavaScript and CSS are embedded directly into the HTML file, with external dependencies limited to whitelisted sources.</p>
                            </div>
                            <div class="principle-card">
                                <div class="principle-icon">🚀</div>
                                <h3>Optimization</h3>
                                <p>Redundant functions, dead comments, and duplicated logic are removed, and similar components are combined for better performance.</p>
                            </div>
                            <div class="principle-card">
                                <div class="principle-icon">🔧</div>
                                <h3>Self-Repair</h3>
                                <p>Critical modules include self-repair hooks with fallback mechanisms to handle runtime errors gracefully.</p>
                            </div>
                            <div class="principle-card">
                                <div class="principle-icon">🧾</div>
                                <h3>Logging Standards</h3>
                                <p>All significant events are logged with a standardized format for better debugging and monitoring.</p>
                            </div>
                            <div class="principle-card">
                                <div class="principle-icon">📚</div>
                                <h3>Documentation</h3>
                                <p>Every major function and module includes clear documentation explaining its purpose and behavior.</p>
                            </div>
                        </div>
                    </div>
                 </div>
             </section>

            <section id="mcp-components-intro" class="leeway-page-section">
                 <h1 class="section-title">MCP Components Overview</h1>
                <div class="doc-content">
                    <div id="mcp-components-overview-doc" class="leeway-region region-mcp" data-region-label="🟣 MCP: Components Overview">
                        <h2>MCP Components</h2>
                        <p>MCP (Memory, Communication, Processing) components are standardized tools that handle specific functions in a LEEWAY application:</p>
                        <div class="mcp-grid">
                            <div class="mcp-card">
                                <h3>Memory</h3>
                                <p>Handles data storage and retrieval, including:</p>
                                <ul>
                                    <li>Local storage management</li>
                                    <li>Session management</li>
                                    <li>IndexedDB integration</li>
                                    <li>Cache management</li>
                                </ul>
                            </div>
                            <div class="mcp-card">
                                <h3>Communication</h3>
                                <p>Manages interactions with external systems:</p>
                                <ul>
                                    <li>API communication</li>
                                    <li>WebSocket handling</li>
                                    <li>Email/SMS integration</li>
                                    <li>Social media connections</li>
                                </ul>
                            </div>
                            <div class="mcp-card">
                                <h3>Processing</h3>
                                <p>Handles data transformation and business logic:</p>
                                <ul>
                                    <li>Data validation</li>
                                    <li>Format conversion</li>
                                    <li>Calculations and algorithms</li>
                                    <li>AI/ML integration</li>
                                </ul>
                            </div>
                            <div class="mcp-card">
                                <h3>Search</h3>
                                <p>Provides search functionality within the application:</p>
                                <ul>
                                    <li>Content indexing</li>
                                    <li>Query processing</li>
                                    <li>Results ranking</li>
                                    <li>Search UI components</li>
                                </ul>
                            </div>
                            <div class="mcp-card">
                                <h3>Scheduling</h3>
                                <p>Manages time-based operations:</p>
                                <ul>
                                    <li>Task scheduling</li>
                                    <li>Reminders and notifications</li>
                                    <li>Periodic background tasks</li>
                                    <li>Calendar integration</li>
                                </ul>
                            </div>
                        </div>
                        <div class="visual-placeholder" data-type="chart" data-description="Chart showing the relationships/flow between different MCP components (Memory, Communication, Processing, Search, Scheduling).">Chart: MCP Architecture Diagram</div>
                    </div>
                </div>
            </section>

            <section id="mcp-components-search" class="leeway-page-section">
                <h1 class="section-title">🟣 Search (MCP-Search)</h1>
                <div class="doc-content">
                    <h2>🟣 Search (MCP-Search): Finding Information Locally – Powering In-Browser Discovery</h2>
                     <p>MCP-Search is a <strong class="leeway-comment leeway-comment-purple">🟣 Purple</strong>-colored Region responsible for providing search capabilities within the LEEWAY™ application, leveraging the embedded content and semantic structure.</p>
                    <pre class="leeway-code-purple"><code class="language-html">&lt;!-- &lt;span class="leeway-comment leeway-comment-purple"&gt;&lt;!-- &lt;/span&gt;&lt;span class="leeway-comment"&gt;🟣 START: MCP - Search | @type: Module | @status: Active | @tech: JS/IndexedDB/JSON-LD/PyScript | @desc: Provides in-browser search capability over indexed content. --&gt;&lt;/span&gt;
&lt;script id="mcp-search-script-doc"&gt;
  &lt;span class="js-comment"&gt;// **LEEWAY™ MCP-Search Implementation**&lt;/span&gt;
  &lt;span class="js-comment"&gt;// Indexes content (HTML text, JSON-LD, potentially Memory data).&lt;/span&gt;
  &lt;span class="js-comment"&gt;// Provides text and future semantic search functions.&lt;/span&gt;
  &lt;span class="js-comment"&gt;// Requires MCP-Memory for index storage.&lt;/span&gt;
  &lt;span class="js-comment"&gt;// Can leverage PyScript/WASM for semantic search.&lt;/span&gt;
  &lt;span class="js-comment"&gt;// Provides functions: init(), indexContent(item), search(query), semanticSearch(query)&lt;/span&gt;

  &lt;span class="js-keyword"&gt;const&lt;/span&gt; MCP_Search_Doc = (() =&gt; {
    &lt;span class="js-comment"&gt;// Note: In a real app, the index would be stored/loaded via MCP_Memory.&lt;/span&gt;
    &lt;span class="js-comment"&gt;// For this example, we use an in-memory array.&lt;/span&gt;
    &lt;span class="js-keyword"&gt;let&lt;/span&gt; contentIndex = [];
    &lt;span class="js-keyword"&gt;let&lt;/span&gt; semanticIndex = []; &lt;span class="js-comment"&gt;// For semantic search data&lt;/span&gt;

    &lt;span class="js-comment"&gt;// --- Initialization ---&lt;/span&gt;
    &lt;span class="js-keyword"&gt;async&lt;/span&gt; &lt;span class="js-function"&gt;function&lt;/span&gt; init() {
      console.log(&lt;span class="js-string"&gt;"🟣 MCP-Search (Doc): Initializing."&lt;/span&gt;);
      &lt;span class="js-comment"&gt;// In a real app, load index from MCP-Memory&lt;/span&gt;
      &lt;span class="js-comment"&gt;// if (typeof MCP_Memory !== 'undefined') {&lt;/span&gt;
      &lt;span class="js-comment"&gt;//    contentIndex = await MCP_Memory.recall('searchIndex_content') || [];&lt;/span&gt;
      &lt;span class="js-comment"&gt;//    semanticIndex = await MCP_Memory.recall('searchIndex_semantic') || [];&lt;/span&gt;
      &lt;span class="js-comment"&gt;// } else {&lt;/span&gt;
      &lt;span class="js-comment"&gt;//    console.warn("🟣 MCP-Search (Doc): MCP-Memory not available, using in-memory index only.");&lt;/span&gt;
      &lt;span class="js-comment"&gt;// }&lt;/span&gt;
      console.log(&lt;span class="js-string"&gt;`🟣 MCP-Search (Doc): Loaded ${contentIndex.length} content items and ${semanticIndex.length} semantic items into index.`&lt;/span&gt;);
      &lt;span class="js-comment"&gt;// TODO: Log search init event&lt;/span&gt;
      &lt;span class="js-comment"&gt;// if(typeof logEvent_Documentation !== 'undefined') logEvent_Documentation('MCP_SEARCH', 'Initialized', { contentItems: contentIndex.length, semanticItems: semanticIndex.length }, 'mcp-search-script-doc');&lt;/span&gt;

      &lt;span class="js-comment"&gt;// Initial indexing could happen here, or triggered externally&lt;/span&gt;
      &lt;span class="js-comment"&gt;// For docs, we already have the content structured.&lt;/span&gt;
      &lt;span class="js-comment"&gt;// Example: indexVisibleContent(); // Now called by global page script&lt;/span&gt;
    }

    &lt;span class="js-comment"&gt;// --- Indexing ---&lt;/span&gt;
    &lt;span class="js-comment"&gt;// Indexes content from the current DOM, MCP-Memory, etc.&lt;/span&gt;
    &lt;span class="js-function"&gt;function&lt;/span&gt; indexContent(item) {
        &lt;span class="js-comment"&gt;// Item could be a DOM element, a JSON-LD object, or data from MCP_Memory&lt;/span&gt;
        &lt;span class="js-comment"&gt;// Basic implementation: just store item reference or data&lt;/span&gt;
        &lt;span class="js-keyword"&gt;if&lt;/span&gt; (item) {
             contentIndex.push(item);
             &lt;span class="js-comment"&gt;// If item has JSON-LD or specific semantic data, add to semantic index&lt;/span&gt;
             &lt;span class="js-keyword"&gt;if&lt;/span&gt; (item.jsonLd) {
                 semanticIndex.push(item);
             }
             &lt;span class="js-comment"&gt;// In a real app, you'd extract text, metadata, etc.&lt;/span&gt;
        }
         &lt;span class="js-comment"&gt;// In a real app, save index to MCP-Memory periodically or on updates&lt;/span&gt;
         &lt;span class="js-comment"&gt;// if (typeof MCP_Memory_Documentation !== 'undefined') {&lt;/span&gt;
         &lt;span class="js-comment"&gt;//    MCP_Memory_Documentation.store('searchIndex_content', contentIndex);&lt;/span&gt;
         &lt;span class="js-comment"&gt;//    MCP_Memory_Documentation.store('searchIndex_semantic', semanticIndex);&lt;/span&gt;
         &lt;span class="js-comment"&gt;// }&lt;/span&gt;
    }

    &lt;span class="js-comment"&gt;// Example: Basic indexing of visible sections (for documentation context)&lt;/span&gt;
     &lt;span class="js-function"&gt;function&lt;/span&gt; indexVisibleContent() {
         console.log(&lt;span class="js-string"&gt;"🟣 MCP-Search (Doc): Indexing visible sections..."&lt;/span&gt;);
         document.querySelectorAll(&lt;span class="js-string"&gt;'#leeway-standard-content-wrapper .leeway-page-section .doc-content'&lt;/span&gt;).forEach(contentWrapper =&gt; { &lt;!-- Adjusted Selector --&gt;
            &lt;span class="js-keyword"&gt;const&lt;/span&gt; section = contentWrapper.closest(&lt;span class="js-string"&gt;'.leeway-page-section'&lt;/span&gt;);
            &lt;span class="js-keyword"&gt;if&lt;/span&gt; (!section) &lt;span class="js-keyword"&gt;return&lt;/span&gt;;
             &lt;span class="js-comment"&gt;// Extract text content&lt;/span&gt;
             &lt;span class="js-keyword"&gt;const&lt;/span&gt; text = section.textContent &lt;span class="js-operator"&gt;||&lt;/span&gt; &lt;span class="js-string"&gt;""&lt;/span&gt;;
             &lt;span class="js-comment"&gt;// Check for embedded JSON-LD within the section&lt;/span&gt;
             &lt;span class="js-keyword"&gt;const&lt;/span&gt; jsonLdScript = section.querySelector(&lt;span class="js-string"&gt;'script[type="application/ld+json"]'&lt;/span&gt;);
             &lt;span class="js-keyword"&gt;let&lt;/span&gt; jsonLd = &lt;span class="js-null"&gt;null&lt;/span&gt;;
             &lt;span class="js-keyword"&gt;if&lt;/span&gt; (jsonLdScript) {
                 &lt;span class="js-keyword"&gt;try&lt;/span&gt; {
                     jsonLd = JSON.parse(jsonLdScript.textContent);
                 } &lt;span class="js-keyword"&gt;catch&lt;/span&gt; (e) {
                     console.error(&lt;span class="js-string"&gt;`🟣 MCP-Search (Doc): Failed to parse JSON-LD for section ${section.id}`&lt;/span&gt;, e);
                 }
             }
              indexContent({
                 id: section.id,
                 title: section.querySelector(&lt;span class="js-string"&gt;'.section-title'&lt;/span&gt;) ? section.querySelector(&lt;span class="js-string"&gt;'.section-title'&lt;/span&gt;).textContent : section.id,
                 text: text,
                 jsonLd: jsonLd,
                 element: section &lt;span class="js-comment"&gt;// Keep reference for later use (e.g., scrolling to result)&lt;/span&gt;
             });
         });
          console.log(&lt;span class="js-string"&gt;`🟣 MCP-Search (Doc): Finished indexing. ${contentIndex.length} items indexed.`&lt;/span&gt;);
          &lt;span class="js-comment"&gt;// TODO: Log indexing complete event&lt;/span&gt;
     }

    &lt;span class="js-comment"&gt;// --- Search Functions ---&lt;/span&gt;
    &lt;span class="js-comment"&gt;// Simple text search over indexed content&lt;/span&gt;
    &lt;span class="js-function"&gt;function&lt;/span&gt; search(query) {
      console.log(&lt;span class="js-string"&gt;`🟣 MCP-Search (Doc): Performing text search for "${query}"...`&lt;/span&gt;);
      &lt;span class="js-keyword"&gt;const&lt;/span&gt; lowerQuery = query.toLowerCase();
      &lt;span class="js-keyword"&gt;const&lt;/span&gt; results = contentIndex.filter(item =&gt;
           (item.text &amp;&amp; item.text.toLowerCase().includes(lowerQuery)) &lt;span class="js-operator"&gt;||&lt;/span&gt;
           (item.title &amp;&amp; item.title.toLowerCase().includes(lowerQuery)) &lt;span class="js-operator"&gt;||&lt;/span&gt;
           (item.id &amp;&amp; item.id.toLowerCase().includes(lowerQuery)) &lt;span class="js-operator"&gt;||&lt;/span&gt;
           (item.jsonLd &amp;&amp; JSON.stringify(item.jsonLd).toLowerCase().includes(lowerQuery))
      );
       console.log(&lt;span class="js-string"&gt;`🟣 MCP-Search (Doc): Found ${results.length} matching items.`&lt;/span&gt;);
       &lt;span class="js-comment"&gt;// TODO: Log search event&lt;/span&gt;
      &lt;span class="js-keyword"&gt;return&lt;/span&gt; results;
    }

    &lt;span class="js-comment"&gt;// Basic Semantic Search Placeholder&lt;/span&gt;
     &lt;span class="js-function"&gt;function&lt;/span&gt; semanticSearch(query) {
         console.log(&lt;span class="js-string"&gt;`🟣 MCP-Search (Doc): Performing basic semantic search for "${query}"...`&lt;/span&gt;);
         &lt;span class="js-keyword"&gt;const&lt;/span&gt; lowerQuery = query.toLowerCase();
         &lt;span class="js-comment"&gt;// Basic implementation: Filter semantic items based on text content or JSON-LD values&lt;/span&gt;
         &lt;span class="js-keyword"&gt;const&lt;/span&gt; semanticResults = semanticIndex.filter(item =&gt;
             (item.text &amp;&amp; item.text.toLowerCase().includes(lowerQuery)) &lt;span class="js-operator"&gt;||&lt;/span&gt;
             (item.jsonLd &amp;&amp; JSON.stringify(item.jsonLd).toLowerCase().includes(lowerQuery))
         );
         console.log(&lt;span class="js-string"&gt;`🟣 MCP-Search (Doc): Found ${semanticResults.length} semantic items containing "${query}" (basic match).`&lt;/span&gt;);
         &lt;span class="js-keyword"&gt;return&lt;/span&gt; semanticResults; &lt;span class="js-comment"&gt;// Return basic filtered semantic results for now&lt;/span&gt;
     }

    &lt;span class="js-comment"&gt;// --- Public API ---&lt;/span&gt;
    &lt;span class="js-keyword"&gt;return&lt;/span&gt; {
      init, &lt;span class="js-comment"&gt;// Call this on app start&lt;/span&gt;
      indexContent, &lt;span class="js-comment"&gt;// Expose for explicit indexing if needed&lt;/span&gt;
      search, &lt;span class="js-comment"&gt;// Simple text search&lt;/span&gt;
      semanticSearch, &lt;span class="js-comment"&gt;// Advanced semantic search (needs PyScript/AI setup)&lt;/span&gt;
      indexVisibleContent &lt;span class="js-comment"&gt;// Expose for global script&lt;/span&gt;
    };
  })();

  &lt;span class="js-comment"&gt;// Assign to global scope for page scripts to use, prefixed to avoid conflict&lt;/span&gt;
  window.MCP_Search_Documentation = MCP_Search_Doc;

&lt;/script&gt;
&lt;!-- &lt;span class="leeway-comment leeway-comment-purple"&gt;&lt;!-- &lt;/span&gt;&lt;span class="leeway-comment"&gt;🟣 END: MCP - Search --&gt;&lt;/span&gt;</code></pre>
                    <p>MCP-Search transforms your LEEWAY™ application into a readily searchable knowledge base. By building the search intelligence directly into the browser and leveraging the semantic structure, it offers a fast, efficient, and server-free way for users and AI agents to find the information they need, enhancing the application&amp;apos;s utility and the user&amp;apos;s ability to navigate its content.</p>
                    <p>Next, we will explore the <strong>Scheduling (MCP-Scheduling)</strong> component, which manages time-based events.</p>
                    <div class="visual-placeholder" data-type="diagram" data-description="Diagram: Shows client-side indexing of HTML/JSON-LD/Memory, leading to Search Module returning results to UI or Agent.">Diagram: Client-side indexing of HTML/JSON-LD/Memory -&gt; Search Module -&gt; Results (to UI or Agent)</div>
                </div>
            </section>
            <!-- ... (All other sections from index.html would be here) ... -->
            <section id="mcp-components-scheduling" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="mcp-components-memory" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="mcp-components-communication" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="mcp-components-processing" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="implementation-process-intro" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="implementation-process-error-handling" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="implementation-process-seo-enhancements" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="implementation-process-file-embedding" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="implementation-process-optimization" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="advanced-topics-intro" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="advanced-topics-self-repair" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="advanced-topics-logging-standards" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="advanced-topics-in-code-documentation" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="core-principles-modularization" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="core-principles-colorization" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="core-principles-semantic-tagging" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="quickstart-guide" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="artifact-tool-handlers-ps1" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="artifact-tool-handlers-js" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="artifact-leeway-protocol-json" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="artifact-vscode-extension-package-json" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="artifact-vscode-extension-extension-js" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="artifact-vscode-extension-styles-css" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="artifact-vscode-extension-readme-md" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="resources-examples" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="resources-templates" class="leeway-page-section"> (Content as in index.html) </section>
            <section id="resources-faq" class="leeway-page-section"> (Content as in index.html) </section>

             <!-- PDF Download button for LEEWAY Standard documentation -->
            <div style="text-align: center; padding: 2rem;">
                <button type="button" id="download-leeway-standard-embedded-pdf" class="pdf-download-btn">
                    <i class="fas fa-download mr-2"></i> Download LEEWAY Documentation as PDF
                </button>
            </div>
        </main>

        <!-- Agent Lee UI from index.html (React App) -->
        <!-- This Agent Lee is specific to the LEEWAY documentation -->
        <div id="agent-lee-interactive-container">
            <div id="app-root-agentlee">
                <!-- LEEWAY Docs Agent Lee React App will mount here -->
            </div>
        </div>
    </div>
  </div>
  <!-- 🟢 END: CORE - Embedded LEEWAY Standard Section -->

  <!-- 🟢 START: CORE - Global Agent Lee Integration (as per combined prompt) -->
  <div id="global-agent-lee-container" class="fixed bottom-20 right-5 w-[400px] h-[500px] bg-gray-900 rounded-lg shadow-2xl z-50 flex flex-col hidden"> <!-- Start hidden, bottom right above the button -->
    <div class="app-header bg-gradient-to-r from-red-600 to-purple-700 p-3 flex justify-between items-center">
      <div class="header-brand flex items-center">
        <div class="agent-avatar w-10 h-10 rounded-full overflow-hidden mr-2">
          <img src="9tcj6ycenj.png" alt="Agent Lee" class="agent-avatar-image w-full h-full object-cover">
        </div>
        <div>
          <h2 class="text-lg font-bold text-white">Agent Lee</h2>
          <p class="text-xs text-white opacity-80">Navigation & Control Assistant</p>
        </div>
      </div>
      <div class="header-actions flex space-x-2">
        <button type="button" id="agent-lee-help" class="text-white opacity-75 hover:opacity-100 hover:scale-110 transition-transform" title="Help">
          <i class="fas fa-question-circle"></i>
        </button>
        <button type="button" id="minimize-global-agent" class="text-white opacity-75 hover:opacity-100 hover:scale-110 transition-transform" title="Minimize Agent Lee">
          <i class="fas fa-minus"></i>
        </button>
      </div>
    </div>

    <main class="app-main flex-1 flex flex-col">
      <!-- Navigation buttons at top -->
      <div class="agent-navigation bg-gradient-to-r from-gray-800 to-gray-900 p-2 border-b border-gray-700 overflow-x-auto whitespace-nowrap">
        <div class="flex space-x-2">
          <button data-section="intro" class="nav-btn px-3 py-1 text-sm bg-gray-700 hover:bg-red-500 rounded-full text-white transition-colors">Intro</button>
          <button data-section="problem" class="nav-btn px-3 py-1 text-sm bg-gray-700 hover:bg-red-500 rounded-full text-white transition-colors">Problem</button>
          <button data-section="solution" class="nav-btn px-3 py-1 text-sm bg-gray-700 hover:bg-red-500 rounded-full text-white transition-colors">Solution</button>
          <button data-section="product" class="nav-btn px-3 py-1 text-sm bg-gray-700 hover:bg-red-500 rounded-full text-white transition-colors">Product</button>
          <button data-section="market" class="nav-btn px-3 py-1 text-sm bg-gray-700 hover:bg-red-500 rounded-full text-white transition-colors">Market</button>
          <button data-section="model" class="nav-btn px-3 py-1 text-sm bg-gray-700 hover:bg-red-500 rounded-full text-white transition-colors">Model</button>
          <button data-section="traction" class="nav-btn px-3 py-1 text-sm bg-gray-700 hover:bg-red-500 rounded-full text-white transition-colors">Traction</button>
          <button data-section="team" class="nav-btn px-3 py-1 text-sm bg-gray-700 hover:bg-red-500 rounded-full text-white transition-colors">Team</button>
          <button data-section="financials" class="nav-btn px-3 py-1 text-sm bg-gray-700 hover:bg-red-500 rounded-full text-white transition-colors">Financials</button>
          <button data-section="ask" class="nav-btn px-3 py-1 text-sm bg-gray-700 hover:bg-red-500 rounded-full text-white transition-colors">Ask</button>
          <button data-section="downloads" class="nav-btn px-3 py-1 text-sm bg-gray-700 hover:bg-red-500 rounded-full text-white transition-colors">Downloads</button>
          <button id="leeway-standard-btn" class="px-3 py-1 text-sm bg-purple-600 hover:bg-purple-700 rounded-full text-white transition-colors">LEEWAY Standard</button>
        </div>
      </div>
      
      <!-- Voice control buttons -->
      <div class="voice-controls bg-gray-800 px-3 py-2 border-b border-gray-700 flex items-center justify-between">
        <div class="flex items-center">
          <button id="agent-lee-listen-btn" class="bg-red-500 hover:bg-red-600 text-white rounded-full w-8 h-8 flex items-center justify-center mr-2 transition-colors">
            <i class="fas fa-microphone"></i>
          </button>
          <span class="text-white text-xs">Press to speak</span>
        </div>
        <div class="flex items-center">
          <span id="voice-status" class="text-xs text-gray-400 mr-2">Idle</span>
          <div id="voice-indicator" class="w-2 h-2 rounded-full bg-gray-500"></div>
        </div>
      </div>

      <div class="conversation-panel flex-1 overflow-y-auto bg-gray-800 max-h-[280px]">
        <div class="messages-container p-3" id="global-agent-messages">
          <div class="message agent-message mb-3 bg-gray-700 rounded-lg p-3 max-w-[85%]">
            <div class="message-header mb-1 flex justify-between">
              <span class="sender font-semibold text-blue-300">Agent Lee</span>
              <span class="time-stamp text-xs text-gray-400">Just now</span>
            </div>
            <div class="message-content text-white">
              <p>Hello Creator! I'm Agent Lee, your navigation assistant with full control. I can help you:</p>
              <ul class="list-disc pl-5 mt-1 space-y-1 text-sm">
                <li>Navigate to any section (try "go to Solution")</li>
                <li>Explain concepts (try "explain LEEWAY")</li>
                <li>Control the application (try "switch to dark mode")</li>
                <li>Access the LEEWAY Standard</li>
                <li>Download files when needed</li>
              </ul>
              <p class="mt-2 text-sm">What would you like to explore today?</p>
            </div>
          </div>
        </div>
      </div>

      <footer class="input-panel bg-gray-900 p-3 border-t border-gray-700">
        <div class="input-container flex items-center">
          <textarea id="global-user-message-input" class="message-input bg-gray-800 text-white border border-gray-700 rounded-lg p-3 flex-1 resize-none focus:outline-none focus:ring-2 focus:ring-red-500" placeholder="Type a command or question..." rows="1" style="max-height: 60px; min-height: 40px;"></textarea>
          <div class="flex flex-col ml-2">
            <button type="button" id="global-send-message" class="bg-red-600 hover:bg-red-700 text-white p-2 rounded-full flex items-center justify-center w-10 h-10 mb-1">
              <i class="fas fa-paper-plane"></i>
            </button>
            <button type="button" id="global-voice-message" class="bg-purple-600 hover:bg-purple-700 text-white p-2 rounded-full flex items-center justify-center w-10 h-10" title="Send voice message">
              <i class="fas fa-microphone"></i>
            </button>
          </div>
        </div>
      </footer>
    </main>
  </div>

  <!-- Agent Lee button at the bottom right -->
  <button type="button" id="toggle-global-agent-lee" class="fixed bottom-5 right-5 w-14 h-14 rounded-full bg-red-500 flex items-center justify-center shadow-lg z-50 hover:bg-red-600 transition-all duration-200 transform hover:scale-110" title="Open Agent Lee">
    <img src="9tcj6ycenj.png" alt="Agent Lee" class="agent-button-image w-10 h-10 rounded-full">
    <span class="sr-only">Open Agent Lee</span>
  </button>
  <!-- 🟢 END: CORE - Global Agent Lee Integration -->


  <!-- 🟣 START: MCP - Combined Scripts -->
  <!-- Animation library for smooth transitions -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  
  <!-- Agent Lee Speech Bubble -->
  <div id="agent-lee-speech-bubble" class="fixed hidden z-[9999] pointer-events-none">
    <div class="relative bg-blue-600 text-white rounded-lg p-3 shadow-xl max-w-xs">
      <div class="absolute -bottom-2 left-4 w-0 h-0 border-l-4 border-r-4 border-t-8 border-l-transparent border-r-transparent border-t-blue-600"></div>
      <div id="speech-bubble-content" class="text-sm font-medium"></div>
    </div>
  </div>
  
  <script>
    // Function to show speech bubble
    function showSpeechBubble(text, duration = 4000) {
      const speechBubble = document.getElementById('agent-lee-speech-bubble');
      const content = document.getElementById('speech-bubble-content');
      const agentButton = document.getElementById('toggle-global-agent-lee');
      
      if (!speechBubble || !content || !agentButton) return;
      
      // Set content
      content.textContent = text;
      
      // Position bubble above Agent Lee button
      const rect = agentButton.getBoundingClientRect();
      speechBubble.style.left = (rect.left + rect.width/2 - 100) + 'px';
      speechBubble.style.bottom = (window.innerHeight - rect.top + 10) + 'px';
      
      // Show bubble with animation
      speechBubble.classList.remove('hidden');
      speechBubble.classList.add('animate__animated', 'animate__fadeIn');
      
      // Hide after duration
      setTimeout(() => {
        speechBubble.classList.remove('animate__fadeIn');
        speechBubble.classList.add('animate__fadeOut');
        
        setTimeout(() => {
          speechBubble.classList.remove('animate__animated', 'animate__fadeOut');
          speechBubble.classList.add('hidden');
        }, 500);
      }, duration);
    }
  
    // Global Agent Lee Toggle and Functionality
    document.addEventListener('DOMContentLoaded', function() {
      const toggleButton = document.getElementById('toggle-global-agent-lee');
      const agentContainer = document.getElementById('global-agent-lee-container');
      const minimizeButton = document.getElementById('minimize-global-agent');
      const messageInput = document.getElementById('global-user-message-input');
      const sendButton = document.getElementById('global-send-message');
      const messagesContainer = document.getElementById('global-agent-messages');
      const helpButton = document.getElementById('agent-lee-help');
      
      // Toggle visibility with animation
      if (toggleButton && agentContainer) {
        toggleButton.addEventListener('click', function() {
          agentContainer.classList.remove('hidden');
          agentContainer.classList.add('animate__animated', 'animate__fadeInUp');
          toggleButton.classList.add('hidden');
          
          // Focus input field
          setTimeout(() => {
            if (messageInput) messageInput.focus();
          }, 300);
        });
      }
      
      if (minimizeButton && agentContainer) {
        minimizeButton.addEventListener('click', function() {
          agentContainer.classList.add('animate__animated', 'animate__fadeOutDown');
          
          // Wait for animation to complete then hide
          setTimeout(() => {
            agentContainer.classList.remove('animate__animated', 'animate__fadeOutDown');
            agentContainer.classList.add('hidden');
            toggleButton.classList.remove('hidden');
          }, 300);
        });
      }
      
      // Add navigation functionality to nav buttons
      document.querySelectorAll('.nav-btn').forEach(button => {
        button.addEventListener('click', function() {
          const section = this.dataset.section;
          if (section) {
            navigateToPage(section);
            
            // Update active button
            document.querySelectorAll('.nav-btn').forEach(btn => {
              btn.classList.remove('bg-red-500');
              btn.classList.add('bg-gray-700');
            });
            this.classList.remove('bg-gray-700');
            this.classList.add('bg-red-500');
          }
        });
      });
      
      // LEEWAY standard button
      const leewayStandardBtn = document.getElementById('leeway-standard-btn');
      if (leewayStandardBtn) {
        leewayStandardBtn.addEventListener('click', function() {
          window.open('leewaystandard.html', '_blank');
        });
      }
      
      // Help button functionality
      if (helpButton) {
        helpButton.addEventListener('click', function() {
          const helpMessage = document.createElement('div');
          helpMessage.className = 'message agent-message mb-3 bg-gray-700 rounded-lg p-3 max-w-[85%]';
          helpMessage.innerHTML = `
            <div class="message-header mb-1 flex justify-between">
              <span class="sender font-semibold text-blue-300">Agent Lee</span>
              <span class="time-stamp text-xs text-gray-400">Just now</span>
            </div>
            <div class="message-content text-white">
              <p class="font-bold">Agent Lee Help Guide:</p>
              <ul class="list-disc pl-5 mt-2 space-y-1 text-sm">
                <li><b>Navigation:</b> Click the buttons above or type "go to [section]"</li>
                <li><b>Voice Control:</b> Click the microphone button and speak your command</li>
                <li><b>Theme Control:</b> Say "switch to dark/light mode"</li>
                <li><b>Downloads:</b> Ask me to "download business plan" or other files</li>
                <li><b>LEEWAY Standard:</b> Say "open LEEWAY standard" to view documentation</li>
              </ul>
              <p class="mt-2 text-sm">I have <b>full control</b> over the application and can handle all navigation and functions for you!</p>
            </div>
          `;
          messagesContainer.appendChild(helpMessage);
          messagesContainer.scrollTop = messagesContainer.scrollHeight;
        });
      }
      
      // Voice button functionality
      const listenBtn = document.getElementById('agent-lee-listen-btn');
      const voiceStatus = document.getElementById('voice-status');
      const voiceIndicator = document.getElementById('voice-indicator');
      const voiceMessageBtn = document.getElementById('global-voice-message');
      
      // Global voice button in footer
      if (voiceMessageBtn) {
        voiceMessageBtn.addEventListener('click', function() {
          // Same functionality as the top listen button
          if (listenBtn) {
            listenBtn.click();
          }
        });
      }
      
      if (listenBtn && voiceStatus && voiceIndicator) {
        let isListening = false;
        
        listenBtn.addEventListener('click', function() {
          if (isListening) {
            // Stop listening
            isListening = false;
            voiceStatus.textContent = 'Idle';
            voiceIndicator.classList.remove('bg-red-500', 'animate-pulse');
            voiceIndicator.classList.add('bg-gray-500');
            listenBtn.innerHTML = '<i class="fas fa-microphone"></i>';
          } else {
            // Start listening
            isListening = true;
            voiceStatus.textContent = 'Listening...';
            voiceIndicator.classList.remove('bg-gray-500');
            voiceIndicator.classList.add('bg-red-500', 'animate-pulse');
            listenBtn.innerHTML = '<i class="fas fa-microphone-slash"></i>';
            
            // Get a random command to simulate for demo purposes
            const demoCommands = [
              { text: "Go to solution", section: "solution" },
              { text: "Show me the team", section: "team" },
              { text: "Navigate to financials", section: "financials" },
              { text: "Tell me about the market", section: "market" },
              { text: "Open LEEWAY standard", action: "leeway" }
            ];
            
            const randomCommand = demoCommands[Math.floor(Math.random() * demoCommands.length)];
            
            // Simulate voice recognition (in a real implementation, we'd use the Web Speech API)
            setTimeout(() => {
              // Add a simulated response after "listening"
              const userMessage = document.createElement('div');
              userMessage.className = 'message user-message mb-3 bg-red-900 rounded-lg p-3 max-w-[85%] ml-auto';
              userMessage.innerHTML = `
                <div class="message-content text-white">
                  <p>${randomCommand.text}</p>
                </div>
              `;
              messagesContainer.appendChild(userMessage);
              messagesContainer.scrollTop = messagesContainer.scrollHeight;
              
              // Process the voice command
              setTimeout(() => {
                if (randomCommand.action === "leeway") {
                  // LEEWAY Standard action
                  const agentResponse = document.createElement('div');
                  agentResponse.className = 'message agent-message mb-3 bg-gray-700 rounded-lg p-3 max-w-[85%]';
                  agentResponse.innerHTML = `
                    <div class="message-header mb-1 flex justify-between">
                      <span class="sender font-semibold text-blue-300">Agent Lee</span>
                      <span class="time-stamp text-xs text-gray-400">Just now</span>
                    </div>
                    <div class="message-content text-white">
                      <p>Opening the LEEWAY Standard documentation for you!</p>
                    </div>
                  `;
                  messagesContainer.appendChild(agentResponse);
                  messagesContainer.scrollTop = messagesContainer.scrollHeight;
                  
                  window.open('leewaystandard.html', '_blank');
                } else {
                  // Navigation command
                  const agentResponse = document.createElement('div');
                  agentResponse.className = 'message agent-message mb-3 bg-gray-700 rounded-lg p-3 max-w-[85%]';
                  agentResponse.innerHTML = `
                    <div class="message-header mb-1 flex justify-between">
                      <span class="sender font-semibold text-blue-300">Agent Lee</span>
                      <span class="time-stamp text-xs text-gray-400">Just now</span>
                    </div>
                    <div class="message-content text-white">
                      <p>Taking you to the ${randomCommand.section} section!</p>
                    </div>
                  `;
                  messagesContainer.appendChild(agentResponse);
                  messagesContainer.scrollTop = messagesContainer.scrollHeight;
                  
                  // Navigate to the section
                  navigateToPage(randomCommand.section);
                  
                  // Update nav buttons
                  document.querySelectorAll('.nav-btn').forEach(btn => {
                    btn.classList.remove('bg-red-500');
                    btn.classList.add('bg-gray-700');
                    if (btn.dataset.section === randomCommand.section) {
                      btn.classList.remove('bg-gray-700');
                      btn.classList.add('bg-red-500');
                    }
                  });
                }
                
                // Reset listening state
                isListening = false;
                voiceStatus.textContent = 'Idle';
                voiceIndicator.classList.remove('bg-red-500', 'animate-pulse');
                voiceIndicator.classList.add('bg-gray-500');
                listenBtn.innerHTML = '<i class="fas fa-microphone"></i>';
              }, 500);
            }, 2000);
          }
        });
      }
      
      // Message sending functionality
      function sendMessage() {
        const message = messageInput.value.trim();
        if (!message) return;
        
        // Add user message
        const userMessageElement = document.createElement('div');
        userMessageElement.className = 'message user-message mb-3 bg-red-900 rounded-lg p-3 max-w-[85%] ml-auto';
        userMessageElement.innerHTML = `
          <div class="message-content text-white">
            <p>${message}</p>
          </div>
        `;
        messagesContainer.appendChild(userMessageElement);
        messagesContainer.scrollTop = messagesContainer.scrollHeight;
        
        // Clear input
        messageInput.value = '';
        
        // Enhanced command processing
        let handled = false;
        
        // Navigation commands
        if (message.toLowerCase().includes('go to') || message.toLowerCase().includes('navigate to') || message.toLowerCase().includes('show me')) {
          const sections = ['intro', 'problem', 'solution', 'product', 'market', 'model', 'traction', 'team', 'financials', 'ask', 'downloads'];
          
          for (const section of sections) {
            if (message.toLowerCase().includes(section)) {
              // Add agent response
              setTimeout(() => {
                const agentResponse = document.createElement('div');
                agentResponse.className = 'message agent-message mb-3 bg-gray-700 rounded-lg p-3 max-w-[85%]';
                agentResponse.innerHTML = `
                  <div class="message-header mb-1 flex justify-between">
                    <span class="sender font-semibold text-blue-300">Agent Lee</span>
                    <span class="time-stamp text-xs text-gray-400">Just now</span>
                  </div>
                  <div class="message-content text-white">
                    <p>Taking you to the ${section} section!</p>
                  </div>
                `;
                messagesContainer.appendChild(agentResponse);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
                
                // Navigate to the section
                navigateToPage(section);
                
                // Update nav buttons
                document.querySelectorAll('.nav-btn').forEach(btn => {
                  btn.classList.remove('bg-red-500');
                  btn.classList.add('bg-gray-700');
                  if (btn.dataset.section === section) {
                    btn.classList.remove('bg-gray-700');
                    btn.classList.add('bg-red-500');
                  }
                });
              }, 500);
              handled = true;
              break;
            }
          }
        }
        
        // LEEWAY Standard command
        if (!handled && (message.toLowerCase().includes('leeway') || message.toLowerCase().includes('standard'))) {
          setTimeout(() => {
            const agentResponse = document.createElement('div');
            agentResponse.className = 'message agent-message mb-3 bg-gray-700 rounded-lg p-3 max-w-[85%]';
            agentResponse.innerHTML = `
              <div class="message-header mb-1 flex justify-between">
                <span class="sender font-semibold text-blue-300">Agent Lee</span>
                <span class="time-stamp text-xs text-gray-400">Just now</span>
              </div>
              <div class="message-content text-white">
                <p>Opening the LEEWAY Standard documentation for you!</p>
              </div>
            `;
            messagesContainer.appendChild(agentResponse);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            // Open LEEWAY Standard
            window.open('leewaystandard.html', '_blank');
          }, 500);
          handled = true;
        }
        
        // Theme commands
        if (!handled && (message.toLowerCase().includes('dark mode') || message.toLowerCase().includes('light mode') || message.toLowerCase().includes('theme'))) {
          const isDarkRequested = message.toLowerCase().includes('dark');
          const isLightRequested = message.toLowerCase().includes('light');
          
          if (isDarkRequested || isLightRequested) {
            setTimeout(() => {
              const agentResponse = document.createElement('div');
              agentResponse.className = 'message agent-message mb-3 bg-gray-700 rounded-lg p-3 max-w-[85%]';
              agentResponse.innerHTML = `
                <div class="message-header mb-1 flex justify-between">
                  <span class="sender font-semibold text-blue-300">Agent Lee</span>
                  <span class="time-stamp text-xs text-gray-400">Just now</span>
                </div>
                <div class="message-content text-white">
                  <p>Switching to ${isDarkRequested ? 'dark' : 'light'} mode!</p>
                </div>
              `;
              messagesContainer.appendChild(agentResponse);
              messagesContainer.scrollTop = messagesContainer.scrollHeight;
              
              // Switch theme
              const html = document.documentElement;
              if (isDarkRequested) {
                html.classList.add('dark');
                html.classList.remove('light-mode');
              } else {
                html.classList.remove('dark');
                html.classList.add('light-mode');
              }
            }, 500);
            handled = true;
          }
        }
        
        if (!handled) {
        
          // Download commands
          if (message.toLowerCase().includes('download')) {
            setTimeout(() => {
              const agentResponse = document.createElement('div');
              agentResponse.className = 'message agent-message mb-3 bg-gray-700 rounded-lg p-3 max-w-[85%]';
              agentResponse.innerHTML = `
                <div class="message-header mb-1 flex justify-between">
                  <span class="sender font-semibold text-blue-300">Agent Lee</span>
                  <span class="time-stamp text-xs text-gray-400">Just now</span>
                </div>
                <div class="message-content text-white">
                  <p>I'm preparing downloads for you. What would you like to download?</p>
                  <div class="mt-2 flex flex-col space-y-2">
                    <button class="download-btn bg-blue-600 hover:bg-blue-700 text-white py-1 px-3 rounded text-sm w-full text-left">Business Plan PDF</button>
                    <button class="download-btn bg-blue-600 hover:bg-blue-700 text-white py-1 px-3 rounded text-sm w-full text-left">LEEWAY Standard PDF</button>
                    <button class="download-btn bg-blue-600 hover:bg-blue-700 text-white py-1 px-3 rounded text-sm w-full text-left">Full Presentation</button>
                  </div>
                </div>
              `;
              messagesContainer.appendChild(agentResponse);
              messagesContainer.scrollTop = messagesContainer.scrollHeight;
              
              // Add click events to download buttons
              setTimeout(() => {
                document.querySelectorAll('.download-btn').forEach(btn => {
                  btn.addEventListener('click', function() {
                    // Show a speech bubble popup
                    showSpeechBubble("Starting download for: " + this.textContent);
                    navigateToPage('downloads');
                  });
                });
              }, 100);
            }, 500);
          } else {
            // Generic response for other messages
            setTimeout(() => {
              const agentResponse = document.createElement('div');
              agentResponse.className = 'message agent-message mb-3 bg-gray-700 rounded-lg p-3 max-w-[85%]';
              agentResponse.innerHTML = `
                <div class="message-header mb-1 flex justify-between">
                  <span class="sender font-semibold text-blue-300">Agent Lee</span>
                  <span class="time-stamp text-xs text-gray-400">Just now</span>
                </div>
                <div class="message-content text-white">
                  <p>I'm here to help you navigate through the presentation. Here are some things you can ask me to do:</p>
                  <ul class="list-disc pl-5 mt-1 space-y-1 text-sm">
                    <li>"Go to solution" - Navigate to any section</li>
                    <li>"Explain LEEWAY" - Get detailed explanations</li>
                    <li>"Download business plan" - Access downloads</li>
                    <li>"Switch to dark mode" - Change the theme</li>
                    <li>"Open LEEWAY Standard" - View documentation</li>
                  </ul>
                  <p class="mt-2 text-sm">What would you like me to help you with?</p>
                </div>
              `;
              messagesContainer.appendChild(agentResponse);
              messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 500);
          }
        }
      }
      
      // Send button click handler
      if (sendButton) {
        sendButton.addEventListener('click', sendMessage);
      }
      
      // Enter key handler
      if (messageInput) {
        messageInput.addEventListener('keypress', function(e) {
          if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault();
            sendMessage();
          }
        });
        
        // Auto-resize textarea
        messageInput.addEventListener('input', function() {
          this.style.height = 'auto';
          this.style.height = (this.scrollHeight) + 'px';
        });
      }
    });
  </script>
  <script>
    // --- Script for NextPlan (Investor Deck) ---
    let charts = {}; // Object to hold chart instances

    function navigateToPage(pageId) {
      document.querySelectorAll('.nextplan-page-section').forEach(page => {
        if (page.id === pageId) {
          page.classList.add('active');
        } else {
          page.classList.remove('active');
        }
      });
      
      document.querySelectorAll('.nextplan-nav-link').forEach(link => {
        link.classList.remove('active');
         // Check if the link's onclick matches navigateToPage('pageId')
        if (link.getAttribute('onclick') === `navigateToPage('${pageId}')` || (link.textContent.toLowerCase().includes(pageId) && pageId !== 'leewaystandardview')) { // Added a check for text content as fallback
            link.classList.add('active');
        }
      });
      window.scrollTo(0, 0);

      Object.keys(charts).forEach(chartKey => {
        if(charts[chartKey]) {
            const canvasElement = charts[chartKey].canvas;
            const parentSection = canvasElement.closest('.nextplan-page-section');
            if(parentSection && parentSection.id !== pageId) {
                charts[chartKey].destroy();
                charts[chartKey] = null;
            }
        }
      });
      
      if (pageId === 'market' && !charts.marketChart) initializeMarketChart();
      if (pageId === 'model' && !charts.marginChart) initializeMarginChart();
      if (pageId === 'financials') {
        if (!charts.revenueChart) initializeRevenueChart(); else charts.revenueChart.update();
        if (!charts.customerChart) initializeCustomerChart(); else charts.customerChart.update();
        if (!charts.artistROIChart) initializeArtistROIChart(); else charts.artistROIChart.update();
        if (!charts.platformRevenuePieChart) initializePlatformRevenuePieChart(); else charts.platformRevenuePieChart.update();
      }
      if (pageId === 'ask' && !charts.fundingChart) initializeFundingChart(); else if (charts.fundingChart) charts.fundingChart.update();
      
      updateChartColors();
    }
    
    const yearLabels = ['Year 1', 'Year 2', 'Year 3'];
    const oneTimeRevenue = [152250, 548100, 1169280];
    const recurringRevenue = [5700, 29100, 79200];
    const totalRevenueData = oneTimeRevenue.map((val, idx) => val + recurringRevenue[idx]);
    const customerAcquisitionData = [250, 900, 1920];
    const competitorAnnualCost = [440, 440, 440]; 
    const rwdCost = [609, 0, 0]; 
    const fundingLabels = ['Product Dev & R&D', 'Marketing & Sales', 'Operations & Team', 'Pilot Program Expansion'];
    const fundingData = [35, 30, 20, 15];
    
    const platformRevenueFullLabels = [
        'Pandora (~90% take)', 'SoundCloud (~90% take)', 'Facebook (est. ~90% take)', 'YouTube (~90-99% take)', 
        'Apple Music (~80-90% take)', 'Spotify (~80-90% take)', 'AWAL (15% commission)',
        'RouteNote Free (15% commission)', 'ONErpm (15% commission)', 'CD Baby (9% commission)',
        'Bandcamp (15% of sale)', 'RapidWebDevelop (0% of direct sale)'
    ];
    const platformRevenueValues = [14.9, 14.9, 14.9, 15.7, 14.1, 14.1, 2.5, 2.5, 2.5, 1.5, 1.5, 0.9 ];
    const platformRevenueColors = [
        '#ADC8E6', '#FF69B4', '#6495ED', '#40E0D0', '#FFFACD', '#FFB6C1', 
        '#FFD700', '#DA70D6', '#800000', '#FA8072', '#FFA500', 
        '#22C55E' 
    ];

    function getChartOptions(titleText = null, isPie = false) {
        const textColor = getComputedStyle(document.documentElement).getPropertyValue('--chart-label-color').trim();
        const gridColor = getComputedStyle(document.documentElement).getPropertyValue('--chart-grid-color').trim();
        
        let options = {
            responsive: true, 
            maintainAspectRatio: false, 
            plugins: { 
                legend: { 
                    position: isPie ? 'right' : 'top', 
                    labels: { 
                        color: textColor, 
                        padding: isPie ? 5 : 15, 
                        boxWidth: 12,
                        font: { size: isPie ? 9 : Chart.defaults.font.size }
                    } 
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            let label = context.label || '';
                            if (label) { label += ': '; }
                            if (context.parsed !== null) { 
                                if(isPie || (context.dataset && context.dataset.label && (context.dataset.label.includes("Revenue") || context.dataset.label.includes("Cost")))){
                                   label += (isPie ? '' : '$') + context.parsed.toLocaleString(undefined, {minimumFractionDigits: 0, maximumFractionDigits: isPie ? 1:0}) + (isPie ? '%' : '');
                                } else {
                                   label += context.parsed;
                                }
                            }
                            return label;
                        }
                    }
                }
            }
        };
        if (titleText) {
            options.plugins.title = { display: true, text: titleText, color: textColor, font: {size: 16}, padding:10 };
        }
        if (!isPie) {
            options.scales = { 
                x: { ticks: { color: textColor, font:{size:10} }, grid: { color: gridColor } }, 
                y: { ticks: { color: textColor, font:{size:10}, callback: function(value) { return '$' + value.toLocaleString(); } }, grid: { color: gridColor } } 
            };
        }
        return options;
    }
    
    function initializeMarketChart() {
      const canvas = document.getElementById('marketChart');
      if (!canvas || charts.marketChart) return;
      charts.marketChart = new Chart(canvas.getContext('2d'), {
        type: 'line',
        data: { labels: ['2024', '2025', '2026', '2027', '2028'], datasets: [{ label: 'Artists Seeking Ownership Solutions (Illustrative)', data: [150000, 275000, 500000, 800000, 1200000], borderColor: 'var(--highlight-color)', backgroundColor: 'rgba(248, 113, 113, 0.1)', tension: 0.4 }] },
        options: getChartOptions('Market Growth Potential')
      });
    }

    function initializeMarginChart() {
      const canvas = document.getElementById('marginChart');
      if (!canvas || charts.marginChart) return;
      let chartOptions = getChartOptions();
      chartOptions.plugins.legend.display = false;
      chartOptions.scales.y.ticks.callback = function(value) { return '$' + value.toFixed(2); };
      charts.marginChart = new Chart(canvas.getContext('2d'), {
        type: 'bar',
        data: { labels: ['Variable Cost/Unit', 'ASP', 'Gross Profit/Unit'], datasets: [{ label: 'Per Unit Economics ($)', data: [25 + (609*0.029), 609, 609 - (25 + (609*0.029))], backgroundColor: ['rgba(59, 130, 246, 0.7)', 'rgba(16, 185, 129, 0.7)', 'var(--highlight-color)'], borderColor: ['rgb(59, 130, 246)', 'rgb(16, 185, 129)', 'var(--highlight-color)'], borderWidth: 1 }] },
        options: chartOptions
      });
    }

    function initializeRevenueChart() {
      const canvas = document.getElementById('revenueChart');
      if (!canvas || charts.revenueChart) return;
      let chartOptions = getChartOptions();
      chartOptions.scales.y.type = 'linear';
      chartOptions.scales.y.position = 'left';
      chartOptions.scales.y.ticks.callback = function(value) { return '$' + value/1000 + 'k'; };
      charts.revenueChart = new Chart(canvas.getContext('2d'), {
        type: 'bar',
        data: { labels: yearLabels, datasets: [ 
            { label: 'One-Time Revenue ($)', data: oneTimeRevenue, backgroundColor: 'var(--highlight-color)', yAxisID: 'y' }, 
            { label: 'Recurring Revenue ($)', data: recurringRevenue, backgroundColor: 'rgba(52, 211, 153, 0.7)', yAxisID: 'y' } 
        ] },
        options: chartOptions
      });
    }
    
    function initializeCustomerChart() {
      const canvas = document.getElementById('customerChart');
      if (!canvas || charts.customerChart) return;
      let chartOptions = getChartOptions();
      chartOptions.plugins.legend.display = false;
      charts.customerChart = new Chart(canvas.getContext('2d'), {
        type: 'bar',
        data: { labels: yearLabels, datasets: [{ label: 'Artist Platforms Delivered', data: customerAcquisitionData, backgroundColor: 'rgba(16, 185, 129, 0.7)' }] },
        options: chartOptions
      });
    }

    function initializeArtistROIChart() {
      const canvas = document.getElementById('artistROIChart');
      if (!canvas || charts.artistROIChart) return;
      let chartOptions = getChartOptions();
      chartOptions.scales.y.ticks.callback = function(value) { return '$' + value; };
      charts.artistROIChart = new Chart(canvas.getContext('2d'), {
        type: 'bar',
        data: { labels: yearLabels, datasets: [ { label: 'Typical Platform Costs (Fees & Commissions)', data: competitorAnnualCost, backgroundColor: 'rgba(239, 68, 68, 0.7)' },  { label: 'RapidWebDevelop Cost (One-Time Fee)', data: rwdCost, backgroundColor: 'rgba(16, 185, 129, 0.7)' } ] },
        options: chartOptions
      });
    }

    function initializeFundingChart() {
      const canvas = document.getElementById('fundingChart');
      if (!canvas || charts.fundingChart) return;
      let chartOptions = getChartOptions(null, true); 
      chartOptions.plugins.legend.position = 'bottom';
      charts.fundingChart = new Chart(canvas.getContext('2d'), {
        type: 'doughnut',
        data: { labels: fundingLabels, datasets: [{ data: fundingData, backgroundColor: ['rgba(59, 130, 246, 0.8)', 'rgba(16, 185, 129, 0.8)', 'rgba(239, 68, 68, 0.8)', 'rgba(245, 158, 11, 0.8)'], borderColor: 'var(--bg-color)', borderWidth: 2 }] },
        options: chartOptions
      });
    }

    function initializePlatformRevenuePieChart() {
        const canvas = document.getElementById('platformRevenuePieChart');
        if (!canvas || charts.platformRevenuePieChart) return;
        let chartOptions = getChartOptions(null, true); 
        charts.platformRevenuePieChart = new Chart(canvas.getContext('2d'), {
            type: 'pie',
            data: {
                labels: platformRevenueFullLabels,
                datasets: [{
                    label: 'Est. Revenue Taken by Platforms/Distributors',
                    data: platformRevenueValues,
                    backgroundColor: platformRevenueColors,
                    borderColor: 'var(--bg-color)',
                    borderWidth: 1
                }]
            },
            options: chartOptions
        });
    }
    
    // --- Script for LEEWAY Standard Section (from index.html, adapted) ---
    const leewayThemeToggleBtn = null; // Original LEEWAY theme toggle, not used. Global toggle is `#theme-toggle`
    const leewayDocHtmlEl = document.documentElement; // Global html element

    // This applyTheme is for the global theme toggle to affect LEEWAY section
    function applyGlobalThemeToLeeway(theme) {
        // LEEWAY section variables are already defined in :root and .light-mode
        // So, toggling .light-mode on <html> will correctly apply them.
        // If LEEWAY's Agent Lee needs specific theme update, call its function.
        const leewayAgentLeeReactInstance = window.AgentLeeReact; // From LEEWAY's React script
        if (leewayAgentLeeReactInstance && typeof leewayAgentLeeReactInstance.setTheme === 'function') {
            leewayAgentLeeReactInstance.setTheme(theme);
        }
    }
    
    function navigateToLeewaySection(sectionId, clickedLink = null) {
        document.querySelectorAll('#leeway-standard-content-wrapper .leeway-page-section').forEach(s => { 
            s.classList.remove('active');
            s.style.display = 'none'; // Ensure only active is displayed
        });
        const targetElement = document.getElementById(sectionId);
        
        if (targetElement) {
            targetElement.style.display = 'block';
            targetElement.classList.add('active');

            const leewayMainContentEl = document.querySelector('#leeway-standard-content-wrapper .leeway-main-content');
            if (leewayMainContentEl) {
                 // Scroll to top of section within leeway-main-content
                leewayMainContentEl.scrollTop = targetElement.offsetTop - leewayMainContentEl.offsetTop;
            }
            
            // Update active link in LEEWAY sidebar
            document.querySelectorAll('#leeway-standard-content-wrapper .leeway-sidebar .nav-link').forEach(link => link.classList.remove('active'));
            if (clickedLink) { 
                clickedLink.classList.add('active'); 
            } else {
                const activeLink = document.querySelector(`#leeway-standard-content-wrapper .leeway-sidebar .nav-link[href="#${sectionId}"]`);
                if (activeLink) activeLink.classList.add('active');
            }
        } else {
            console.warn("LEEWAY Target section not found:", sectionId);
            const introSection = document.getElementById('introduction-section');
            if (introSection) {
                 introSection.style.display = 'block';
                 introSection.classList.add('active');
            }
        }
    }
    
    // This function is for LEEWAY's internal scroll-based active link update
    function updateActiveLeewaySidebarLinkForCurrentView() {
        let currentSectionId = "introduction-section"; 
        const sections = document.querySelectorAll('#leeway-standard-content-wrapper .leeway-page-section');
        const leewayMainContentEl = document.querySelector('#leeway-standard-content-wrapper .leeway-main-content');
        if (!leewayMainContentEl) return;

        const threshold = leewayMainContentEl.scrollTop + 60; // Approx header height if it had one

        for (let section of sections) {
            if (section.style.display === 'block' && section.offsetTop <= threshold) {
                currentSectionId = section.id;
            }
        }
        
        document.querySelectorAll('#leeway-standard-content-wrapper .leeway-sidebar .nav-link').forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href') === '#' + currentSectionId) {
                link.classList.add('active');
            }
        });
    }
    
    let leewayScrollTimeout;
    const leewayMainScrollArea = document.querySelector('#leeway-standard-content-wrapper .leeway-main-content');
    if (leewayMainScrollArea) {
        leewayMainScrollArea.addEventListener('scroll', () => {
            clearTimeout(leewayScrollTimeout);
            leewayScrollTimeout = setTimeout(updateActiveLeewaySidebarLinkForCurrentView, 150);
        });
    }
    
    // LEEWAY Docs Conceptual MCPs and logEvent (from index.html)
    if (typeof MCP_Memory_Documentation === 'undefined') {
        window.MCP_Memory_Documentation = (() => {
            const store = {};
            async function recall(key) { console.log(`🟣 MCP-Memory (Doc): Conceptual recall('${key}')`); return Promise.resolve(store[key] || null); }
            async function storeData(key, value) { console.log(`🟣 MCP-Memory (Doc): Conceptual store('${key}', ...)`); store[key] = value; return Promise.resolve(true); }
            async function storeLogEntry(logEntry) { console.log("🟣 MCP-Memory (Doc): Conceptual storeLogEntry", logEntry); return Promise.resolve(true); } 
            return { init: async () => console.log("🟣 MCP-Memory (Doc): Conceptual Init"), recall, store: storeData, storeLogEntry };
        })();
    }
    if (typeof logEvent_Documentation === 'undefined') {
        window.logEvent_Documentation = async (type, description, details = {}, regionId = 'unknown') => {
            console.log(`🔴 LOG (Doc Page) [${type}] [${regionId}]: ${description}`, details);
            if (MCP_Memory_Documentation && typeof MCP_Memory_Documentation.storeLogEntry === 'function') {
                // MCP_Memory_Documentation.storeLogEntry({ timestamp: Date.now(), type, regionId, description, details }); 
            }
        };
    }

    function initializeLeewayDocSearch() {
        const searchInput = document.getElementById('leeway-doc-search-input');
        const searchResultsDiv = document.getElementById('leeway-doc-search-results');
        if (searchInput && searchResultsDiv && window.MCP_Search_Documentation) {
            searchInput.addEventListener('input', () => {
                const query = searchInput.value;
                if (query.length > 2) {
                    const results = window.MCP_Search_Documentation.search(query);
                    displayLeewayDocSearchResults(results, searchResultsDiv);
                } else {
                    searchResultsDiv.style.display = 'none';
                    searchResultsDiv.innerHTML = '';
                }
            });
        }
    }

    function displayLeewayDocSearchResults(results, container) {
        container.innerHTML = ''; 
        if (results.length === 0) {
            container.textContent = `No results found.`;
            container.style.display = 'block';
            return;
        }
        const resultList = document.createElement('ul');
        results.forEach(item => {
            const listItem = document.createElement('li');
            const link = document.createElement('a');
            link.href = `#${item.id}`; 
            link.textContent = item.title || `Section: ${item.id}`;
            link.onclick = (e) => { e.preventDefault(); navigateToLeewaySection(item.id); };

            const snippet = document.createElement('p');
            const textPreview = item.text ? item.text.substring(0, 200) + (item.text.length > 200 ? '...' : '') : 'Content preview unavailable.';
            snippet.textContent = textPreview;
            
            listItem.appendChild(link);
            listItem.appendChild(snippet);
            resultList.appendChild(listItem);
        });
        container.appendChild(resultList);
        container.style.display = 'block';
    }
    
    // --- Combined Page Logic ---
    function toggleLeewayStandardView() {
        const leewaySection = document.getElementById('leeway-standard-content-wrapper');
        const bodyEl = document.body;
        const globalAgentLeeContainer = document.getElementById('global-agent-lee-container');
        const toggleGlobalAgentButton = document.getElementById('toggle-global-agent-lee');

        leewaySection.classList.toggle('hidden');
        bodyEl.classList.toggle('overflow-hidden'); // Prevent NextPlan scroll when LEEWAY is open

        if (!leewaySection.classList.contains('hidden')) {
            // When LEEWAY section is shown
            navigateToLeewaySection('introduction-section'); // Go to its intro
            // Optionally hide the global agent if LEEWAY section has its own
             if(globalAgentLeeContainer) globalAgentLeeContainer.classList.add('hidden');
             if(toggleGlobalAgentButton) toggleGlobalAgentButton.classList.add('hidden');
            
            // Initialize LEEWAY specific scripts if not already done
            if (window.MCP_Search_Documentation && typeof window.MCP_Search_Documentation.indexVisibleContent === 'function' && !window.leewayDocsIndexed) {
                 window.MCP_Search_Documentation.init().then(() => {
                    window.MCP_Search_Documentation.indexVisibleContent();
                    window.leewayDocsIndexed = true; // Mark as indexed
                 }).catch(console.error);
            }
            if (window.MCP_Scheduling_Documentation && !window.leewaySchedulingInited) {
                MCP_Scheduling_Documentation.init().catch(console.error);
                window.leewaySchedulingInited = true;
            }
            initializeLeewayDocSearch(); // Setup search input listener

             // Line numbers for LEEWAY code blocks
            document.querySelectorAll('#leeway-standard-content-wrapper pre code').forEach(codeBlock => {
                if (codeBlock.dataset.numbered) return; // Avoid re-numbering
                const lines = codeBlock.innerHTML.split('\n');
                if (lines.length > 0 && lines[lines.length - 1].trim() === '') lines.pop();
                const numberedLines = lines.map((line, index) => `<span class="leeway-code-line-num" data-line-number="${index + 1}"></span>${line}`);
                codeBlock.innerHTML = numberedLines.join('\n');
                codeBlock.dataset.numbered = true;
            });

            // Make LEEWAY's AgentLee visible (if it's the one from index.html)
            const leewayAgentContainer = document.getElementById('agent-lee-interactive-container');
            if (leewayAgentContainer) {
                 setTimeout(() => leewayAgentContainer.classList.add('visible'), 200); // Small delay for transition
            }

        } else {
            // When LEEWAY section is hidden
            if(globalAgentLeeContainer) globalAgentLeeContainer.classList.remove('hidden'); // Or restore previous state
            if(toggleGlobalAgentButton) toggleGlobalAgentButton.classList.remove('hidden');
            
            const leewayAgentContainer = document.getElementById('agent-lee-interactive-container');
            if (leewayAgentContainer) {
                 leewayAgentContainer.classList.remove('visible');
            }
        }
    }

    function updateChartColors() {
        const textColor = getComputedStyle(document.documentElement).getPropertyValue('--chart-label-color').trim();
        const gridColor = getComputedStyle(document.documentElement).getPropertyValue('--chart-grid-color').trim();
        const highlightColor = getComputedStyle(document.documentElement).getPropertyValue('--highlight-color').trim(); // NextPlan highlight
        const bgColor = getComputedStyle(document.documentElement).getPropertyValue('--bg-color').trim();

        for (const chartKey in charts) {
            if (charts[chartKey] && charts[chartKey].options) {
                const chart = charts[chartKey];
                const isPieOrDoughnut = chart.config.type === 'pie' || chart.config.type === 'doughnut';

                if (chart.options.plugins.legend) chart.options.plugins.legend.labels.color = textColor;
                if (chart.options.plugins.title) chart.options.plugins.title.color = textColor;
                
                if (!isPieOrDoughnut && chart.options.scales) {
                    if(chart.options.scales.x) { chart.options.scales.x.ticks.color = textColor; chart.options.scales.x.grid.color = gridColor; }
                    if(chart.options.scales.y) { chart.options.scales.y.ticks.color = textColor; chart.options.scales.y.grid.color = gridColor; }
                }
                chart.data.datasets.forEach(dataset => {
                    // Update colors that are meant to be dynamic with the theme
                    if(typeof dataset.originalBorderColor === 'undefined') dataset.originalBorderColor = dataset.borderColor;
                    if(typeof dataset.originalBackgroundColor === 'undefined') dataset.originalBackgroundColor = dataset.backgroundColor;

                    if(dataset.originalBorderColor === 'var(--highlight-color)') dataset.borderColor = highlightColor;
                    if(dataset.originalBackgroundColor === 'var(--highlight-color)') dataset.backgroundColor = highlightColor;
                    if(dataset.originalBackgroundColor === 'rgba(248, 113, 113, 0.1)') dataset.backgroundColor = colorMix(highlightColor, 0.1);
                    
                    if (isPieOrDoughnut && dataset.originalBorderColor === 'var(--bg-color)') dataset.borderColor = bgColor;
                });
                chart.update('none'); 
            }
        }
    }
    // Helper to convert var(--highlight-color) to rgba for chart backgrounds
    function colorMix(cssVarColor, alpha) {
        // This is a simplification. Real parsing of hex/rgb from var() is more complex.
        // Assuming var(--highlight-color) resolves to a hex like #f87171
        if (cssVarColor.startsWith('#')) {
            const r = parseInt(cssVarColor.slice(1, 3), 16);
            const g = parseInt(cssVarColor.slice(3, 5), 16);
            const b = parseInt(cssVarColor.slice(5, 7), 16);
            return `rgba(${r}, ${g}, ${b}, ${alpha})`;
        }
        return cssVarColor; // Fallback
    }

    // Global Theme Toggle Logic
    const globalThemeToggleBtn = document.getElementById('theme-toggle');
    globalThemeToggleBtn.addEventListener('click', () => {
        leewayDocHtmlEl.classList.toggle('light-mode');
        leewayDocHtmlEl.classList.toggle('dark');
        const isLight = leewayDocHtmlEl.classList.contains('light-mode');
        localStorage.setItem('combinedTheme', isLight ? 'light' : 'dark');
        globalThemeToggleBtn.textContent = isLight ? '🌙' : '☀️';
        applyGlobalThemeToLeeway(isLight ? 'light' : 'dark'); // Notify LEEWAY's Agent Lee
        updateChartColors(); // Update NextPlan chart colors
    });

    // PDF Generation
    document.getElementById('download-investor-deck-pdf').addEventListener('click', function() {
        const investorDeckContent = document.getElementById('nextplan-content-area').cloneNode(true);
        // Ensure all sections are visible for PDF generation
        investorDeckContent.querySelectorAll('.nextplan-page-section').forEach(s => s.style.display = 'block');
        
        const opt = {
            margin:       [10, 10, 15, 10], // top, left, bottom, right in mm
            filename:     'RapidWebDevelop_Investor_Deck.pdf',
            image:        { type: 'jpeg', quality: 0.95 },
            html2canvas:  { scale: 2, useCORS: true, logging: false, scrollY: -window.scrollY },
            jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' },
            pagebreak:    { mode: ['avoid-all', 'css', 'legacy'], before: '.nextplan-page-section' }
        };
        const worker = html2pdf().set(opt).from(investorDeckContent);
        worker.toPdf().get('pdf').then(function (pdf) {
            const totalPages = pdf.internal.getNumberOfPages();
            for (let i = 1; i <= totalPages; i++) {
                pdf.setPage(i);
                pdf.setFontSize(10);
                pdf.setTextColor(150);
                pdf.text('RapidWebDevelop LLC - Confidential', pdf.internal.pageSize.getWidth() / 2, pdf.internal.pageSize.getHeight() - 10, { align: 'center' });
                pdf.text('Page ' + i + ' of ' + totalPages, pdf.internal.pageSize.getWidth() - 20, pdf.internal.pageSize.getHeight() - 10);
            }
        }).save();
    });

    function downloadLeewayDocs() {
        const leewayDocsContent = document.querySelector('.leeway-main-content').cloneNode(true);
        leewayDocsContent.querySelectorAll('.leeway-page-section').forEach(s => s.style.display = 'block');
        // Remove search bar from PDF
        const searchBar = leewayDocsContent.querySelector('#leeway-doc-search-input');
        if(searchBar) searchBar.remove();
        const searchResults = leewayDocsContent.querySelector('#leeway-doc-search-results');
        if(searchResults) searchResults.remove();


        const opt = {
            margin:       [10, 10, 15, 10],
            filename:     'LEEWAY_Standard_Documentation.pdf',
            image:        { type: 'jpeg', quality: 0.95 },
            html2canvas:  { scale: 2, useCORS: true, logging: false, scrollY: -window.scrollY },
            jsPDF:        { unit: 'mm', format: 'a4', orientation: 'portrait' },
            pagebreak:    { mode: ['avoid-all', 'css', 'legacy'], before: '.leeway-page-section' }
        };
         const worker = html2pdf().set(opt).from(leewayDocsContent);
         worker.toPdf().get('pdf').then(function (pdf) {
            const totalPages = pdf.internal.getNumberOfPages();
            for (let i = 1; i <= totalPages; i++) {
                pdf.setPage(i);
                pdf.setFontSize(10);
                pdf.setTextColor(150);
                pdf.text('LEEWAY Standard Documentation', pdf.internal.pageSize.getWidth() / 2, pdf.internal.pageSize.getHeight() - 10, { align: 'center' });
                 pdf.text('Page ' + i + ' of ' + totalPages, pdf.internal.pageSize.getWidth() - 20, pdf.internal.pageSize.getHeight() - 10);
            }
        }).save();
    }
    document.getElementById('download-leeway-standard-doc-pdf').addEventListener('click', downloadLeewayDocs);
    document.getElementById('download-leeway-standard-embedded-pdf').addEventListener('click', downloadLeewayDocs);


    // Global Agent Lee Logic (from combined prompt)
    const globalAgentLeeContainer = document.getElementById('global-agent-lee-container');
    const toggleGlobalAgentLeeButton = document.getElementById('toggle-global-agent-lee');
    const minimizeGlobalAgentButton = document.getElementById('minimize-global-agent');
    const globalUserMessageInput = document.getElementById('global-user-message-input');
    const globalSendMessageButton = document.getElementById('global-send-message');
    const globalAgentMessages = document.getElementById('global-agent-messages');

    toggleGlobalAgentLeeButton.addEventListener('click', function() {
      globalAgentLeeContainer.classList.remove('hidden');
      toggleGlobalAgentLeeButton.classList.add('hidden');
    });

    minimizeGlobalAgentButton.addEventListener('click', function() {
      globalAgentLeeContainer.classList.add('hidden');
      toggleGlobalAgentLeeButton.classList.remove('hidden');
    });

    function sendGlobalAgentMessage() {
      const message = globalUserMessageInput.value.trim();
      if (message) {
        const userMsgEl = document.createElement('div');
        userMsgEl.className = 'message user-message';
        userMsgEl.innerHTML = `<div class="message-header"><span class="font-semibold">You</span><span class="time-stamp text-xs opacity-70">${new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})}</span></div><div class="message-content"><p>${message.replace(/\n/g, '<br/>')}</p></div>`;
        globalAgentMessages.appendChild(userMsgEl);
        globalUserMessageInput.value = '';
        globalAgentMessages.scrollTop = globalAgentMessages.scrollHeight;

        // Simulate response
        setTimeout(() => {
          let responseText = "I'm here to help! ";
          const lowerMsg = message.toLowerCase();
          if (lowerMsg.includes("leeway") || lowerMsg.includes("standard")) {
            responseText = "The LEEWAY Standard is a comprehensive framework for single-file web apps. You can view the full documentation by clicking the 'View LEEWAY Standard' button in the main navigation. What specifically would you like to know?";
          } else if (lowerMsg.includes("investor") || lowerMsg.includes("deck") || lowerMsg.includes("business plan") || lowerMsg.includes("rapidwebdevelop")) {
            responseText = "The investor deck details RapidWebDevelop's mission to empower artists. Use the top navigation to explore sections like 'Problem', 'Solution', or 'Financials'. Any specific questions?";
          } else if (lowerMsg.includes("download") || lowerMsg.includes("pdf")) {
            responseText = "You can download PDFs of the Investor Deck and LEEWAY Standard from the 'Downloads' section, accessible via the top navigation bar.";
          } else if (lowerMsg.includes("hello") || lowerMsg.includes("hi")) {
            responseText = "Hello there! How can I assist you with the Investor Deck or LEEWAY Standard today?";
          } else {
            responseText = "I can provide general guidance on the Investor Deck and the LEEWAY Standard. For detailed queries about the LEEWAY documentation, please open its section and use its dedicated Agent Lee. How can I help you with the deck?";
          }
          
          const agentMsgEl = document.createElement('div');
          agentMsgEl.className = 'message agent-message';
          agentMsgEl.innerHTML = `<div class="message-header"><span class="font-semibold">Agent Lee</span><span class="time-stamp text-xs opacity-70">${new Date().toLocaleTimeString([], {hour:'2-digit', minute:'2-digit'})}</span></div><div class="message-content"><p>${responseText}</p></div>`;
          globalAgentMessages.appendChild(agentMsgEl);
          globalAgentMessages.scrollTop = globalAgentMessages.scrollHeight;
        }, 800);
      }
    }
    globalSendMessageButton.addEventListener('click', sendGlobalAgentMessage);
    globalUserMessageInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        sendGlobalAgentMessage();
      }
    });


    // Initial page load setup
    document.addEventListener('DOMContentLoaded', function() {
      navigateToPage('intro'); // Set NextPlan intro as active
      
      const savedTheme = localStorage.getItem('combinedTheme');
      if (savedTheme === 'light') {
        leewayDocHtmlEl.classList.add('light-mode');
        leewayDocHtmlEl.classList.remove('dark');
        globalThemeToggleBtn.textContent = '🌙';
      } else {
        leewayDocHtmlEl.classList.add('dark');
        leewayDocHtmlEl.classList.remove('light-mode');
        globalThemeToggleBtn.textContent = '☀️';
      }
      applyGlobalThemeToLeeway(savedTheme || 'dark');
      updateChartColors();

      // Initial setup for LEEWAY docs (Agent Lee React App, Conceptual MCPs, etc.)
      // These will be fully initialized when the LEEWAY section is first opened.
      if (window.MCP_Memory_Documentation) MCP_Memory_Documentation.init();
      
      // Show global agent after a delay
      setTimeout(() => {
          if(globalAgentLeeContainer.classList.contains('hidden') && toggleGlobalAgentLeeButton.classList.contains('hidden')) {
            // Only show if it wasn't explicitly closed and then LEEWAY opened
          } else if (!document.getElementById('leeway-standard-content-wrapper').classList.contains('hidden')) {
            // If LEEWAY docs are open, don't show global agent automatically
          }
          else {
            // globalAgentLeeContainer.classList.remove('hidden'); // Auto-open global agent
            // toggleGlobalAgentLeeButton.classList.add('hidden');
          }
      }, 2000);

    });
  </script>
  <!-- 🟣 END: MCP - Combined Scripts -->

  <!-- 🟣 START: MCP - LEEWAY Docs Agent Lee UI (React - from index.html) -->
  <!-- This script will be executed when index.html content is parsed by the browser,
       even if it's initially hidden. It will mount to #app-root-agentlee within
       the #leeway-standard-content-wrapper -->
  <script type="text/babel">
      // Script content from index.html for its AgentLee React app
      // Note: This assumes the React and Babel CDNs are loaded before this script block.
      // This AgentLee class and React app are specific to the LEEWAY documentation.
      class LeewayDocsAgentLee { // Renamed to avoid conflict if AgentLee was global
          constructor() {
              this.messages = [{type: 'agent', content: "Greetings! I am Agent Lee, your interactive guide through the LEEWAY Standard. Ask me anything about the documentation!", timestamp: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}];
              this.voiceActive = false;
              this.currentTheme = document.documentElement.classList.contains('light-mode') ? 'light' : 'dark'; // Reads global theme
          }

          async processMessage(userInput) {
              let response = "I'm processing that. ";
              const lowerInput = userInput.toLowerCase();

              if (lowerInput.includes("hello") || lowerInput.includes("hi")) {
                  response = "Hello there! How can I help you navigate the LEEWAY documentation?";
              } else if (lowerInput.includes("leeway standard") || lowerInput.includes("what is leeway")) {
                  response = "The LEEWAY Standard is a comprehensive framework for building modular, colorized, and AI-ready web applications in a single HTML file. You can find more in the <a href=\"#overview-section\" onclick=\"event.preventDefault(); navigateToLeewaySection('overview-section', document.querySelector('.leeway-sidebar a[href=\\'#overview-section\\']'));\">Overview section</a>.";
              } else if (lowerInput.includes("mcp components") || lowerInput.includes("mcp")) {
                  response = "MCP stands for Memory, Communication, and Processing. These are standardized components for handling specific functions. More details are in the <a href=\"#mcp-components-intro\" onclick=\"event.preventDefault(); navigateToLeewaySection('mcp-components-intro', document.querySelector('.leeway-sidebar a[href=\\'#mcp-components-intro\\']'));\">MCP Overview</a>.";
              } else if (lowerInput.includes("search for") || lowerInput.includes("find")) {
                  const query = userInput.replace(/search for|find/i, "").trim();
                   if (window.MCP_Search_Documentation && typeof window.MCP_Search_Documentation.search === 'function' && query) {
                      const searchResults = window.MCP_Search_Documentation.search(query);
                      if (searchResults.length > 0) {
                          response = `I found these sections for "${query}":<ul>`;
                          searchResults.slice(0,3).forEach(res => {
                              // Construct the selector carefully to find the link within the LEEWAY sidebar
                              response += `<li><a href="#${res.id}" onclick="event.preventDefault(); navigateToLeewaySection('${res.id}', document.querySelector('#leeway-standard-content-wrapper .leeway-sidebar a[href=\\'#${res.id}\\']'));">${res.title || res.id}</a></li>`;
                          });
                          response += "</ul>You can click these links or ask me to elaborate.";
                      } else { response = `I couldn't find specific results for "${query}" in the LEEWAY docs. Try broadening your search or using the search bar above.`; }
                  } else { response = `I can't perform that LEEWAY doc search right now. Try the search bar above.`; }
              } else if (lowerInput.includes("thank you") || lowerInput.includes("thanks")) {
                  response = "You're welcome! Let me know if there's anything else regarding the LEEWAY Standard.";
              } else {
                  if (window.MCP_Search_Documentation && typeof window.MCP_Search_Documentation.search === 'function') {
                      const searchResults = window.MCP_Search_Documentation.search(userInput);
                      if (searchResults.length > 0) {
                          response = `I found some potentially relevant LEEWAY sections for "${userInput}":<ul>`;
                          searchResults.slice(0,3).forEach(res => { 
                              response += `<li><a href="#${res.id}" onclick="event.preventDefault(); navigateToLeewaySection('${res.id}', document.querySelector('#leeway-standard-content-wrapper .leeway-sidebar a[href=\\'#${res.id}\\']'));">${res.title || res.id}</a></li>`;
                          });
                          response += "</ul>You can click these links or ask me to elaborate on these LEEWAY topics.";
                      } else { response = `I'm still learning about "${userInput}" within the LEEWAY Standard. Try rephrasing or checking the LEEWAY sidebar.`;}
                  } else { response = `I'm sorry, I couldn't process that specific query about "${userInput}" for the LEEWAY Standard.`; }
              }
              await new Promise(resolve => setTimeout(resolve, 300 + Math.random() * 400));
              return response;
          }
          speak(text) { /* ... conceptual ... */ }
          setTheme(theme) { this.currentTheme = theme; /* console.log(`LeewayDocsAgentLee theme set to: ${theme}`);*/ }
      }
      // Expose for global theme updater if needed, but primarily self-manages or listens to global class
      window.AgentLeeReact = null; 

      const LeewayDocsAgentLeeApp = () => {
            const [messages, setMessages] = React.useState([]);
            const [inputValue, setInputValue] = React.useState("");
            const agentInstance = React.useRef(null);
            const messagesEndRef = React.useRef(null);
            // This agent's theme is primarily driven by the CSS variables inherited from .light-mode on <html>
            const [currentTheme, setCurrentTheme] = React.useState(() => document.documentElement.classList.contains('light-mode') ? 'light' : 'dark');


            React.useEffect(() => {
                if (!agentInstance.current) {
                    agentInstance.current = new LeewayDocsAgentLee(); 
                    setMessages(agentInstance.current.messages);
                }
                // Make this instance's setTheme available if an external toggle needs it
                // This is how applyGlobalThemeToLeeway will call it.
                window.AgentLeeReact = { 
                    setTheme: (theme) => {
                        setCurrentTheme(theme); 
                        if (agentInstance.current) agentInstance.current.setTheme(theme);
                    }
                };

                // Observe global theme changes
                const observer = new MutationObserver((mutationsList) => {
                    for(let mutation of mutationsList) {
                        if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
                            const newTheme = document.documentElement.classList.contains('light-mode') ? 'light' : 'dark';
                            setCurrentTheme(newTheme);
                            if (agentInstance.current) agentInstance.current.setTheme(newTheme);
                        }
                    }
                });
                observer.observe(document.documentElement, { attributes: true });
                return () => observer.disconnect();

            }, []); 
            
            React.useEffect(() => { messagesEndRef.current?.scrollIntoView({ behavior: "smooth" }); }, [messages]);

            const handleSendMessage = async () => {
                if (inputValue.trim() === "") return;
                const userMessageText = inputValue; setInputValue(""); 
                const newUserMessage = {type: 'user', content: userMessageText, timestamp: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })};
                setMessages(prev => [...prev, newUserMessage]);
                
                if (agentInstance.current) {
                    const thinkingMessage = {type: 'agent', content: "Thinking...", timestamp: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }), isThinking: true};
                    setMessages(prev => [...prev, thinkingMessage]);
                    const responseContent = await agentInstance.current.processMessage(userMessageText); 
                    setMessages(prev => prev.map(m => m.isThinking ? {...m, content: responseContent, isThinking: false, timestamp: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })} : m));
                    if (agentInstance.current.voiceActive) agentInstance.current.speak(responseContent);
                }
            };
            
            // Use LEEWAY theme variables for styling this agent
            return (
                <div className="app-container" style={{height: '100%', display: 'flex', flexDirection: 'column', backgroundColor: 'var(--leeway-card-bg-color)', color: 'var(--leeway-text-color)'}}>
                    <header className="app-header"> {/* Styled by #agent-lee-interactive-container .app-header */}
                        <div className="header-brand">
                             <img src="C:/Users/Agent Lee/.vscode/.leeway/agentlee.png" alt="Agent Lee" className="agent-avatar" /> {/* From index.html */}
                            <div>
                                <h1 className="text-sm font-bold" style={{color: currentTheme === 'light' ? 'var(--leeway-sidebar-link-active-color)' : 'white'}}>Agent Lee (Docs)</h1>
                                <p className="text-xs" style={{color: currentTheme === 'light' ? 'var(--leeway-sidebar-link-color)' : 'var(--leeway-sidebar-link-color)'}}>LEEWAY Docs Navigator</p>
                            </div>
                        </div>
                    </header>
                    <main className="app-main"> 
                        <div className="conversation-panel">
                            <div className="messages-container">
                                {messages.map((msg, index) => (
                                    <div key={index} className={`message ${msg.type}-message`}>
                                        <div className="message-header">
                                            <strong>{msg.type === 'agent' ? 'Agent Lee (Docs)' : 'You'}</strong>
                                            <span className="ml-2 text-xs opacity-70">{msg.timestamp}</span>
                                        </div>
                                        <div className="message-content" 
                                             dangerouslySetInnerHTML={{ __html: msg.content ? msg.content.replace(/\n/g, '<br/>') : '...' }}>
                                        </div>
                                    </div>
                                ))}
                                <div ref={messagesEndRef} />
                            </div>
                        </div>
                         <footer className="input-panel">
                            <div className="input-container">
                                <textarea
                                    className="message-input"
                                    placeholder="Ask about LEEWAY docs..."
                                    value={inputValue}
                                    onChange={(e) => setInputValue(e.target.value)}
                                    onKeyPress={(e) => e.key === 'Enter' && !e.shiftKey && (e.preventDefault(), handleSendMessage())}
                                    rows="1"
                                ></textarea>
                                <button className="btn-primary" onClick={handleSendMessage} title="Send Message">
                                    <i className="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </footer>
                    </main>
                </div>
            );
        };

        const leewayAgentContainerRoot = document.getElementById('app-root-agentlee');
        if (leewayAgentContainerRoot) {
             ReactDOM.render(React.createElement(LeewayDocsAgentLeeApp), leewayAgentContainerRoot);
        } else {
            console.error("LEEWAY Docs Agent Lee container (#app-root-agentlee) not found!");
        }
  </script>
  <!-- 🟣 END: MCP - LEEWAY Docs Agent Lee UI -->
</body>
</html>